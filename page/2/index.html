<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>wcy 的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="wcy 的博客">
<meta property="og:url" content="http://wcy.me/page/2/index.html">
<meta property="og:site_name" content="wcy 的博客">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="wcy 的博客">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="wcy 的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://avatars1.githubusercontent.com/u/9653758?v=3&amp;s=460" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Dean</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>Über</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/TheCrookedMan/thecrookedman.github.com/tree/master" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/CSS/" style="font-size: 12.5px;">CSS</a> <a href="/tags/Chrome/" style="font-size: 10px;">Chrome</a> <a href="/tags/Cross-domain/" style="font-size: 10px;">Cross-domain</a> <a href="/tags/Git/" style="font-size: 12.5px;">Git</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/HTML5/" style="font-size: 20px;">HTML5</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Hybrid/" style="font-size: 10px;">Hybrid</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Linux/" style="font-size: 17.5px;">Linux</a> <a href="/tags/Mac-Os/" style="font-size: 10px;">Mac Os</a> <a href="/tags/MongoDB/" style="font-size: 12.5px;">MongoDB</a> <a href="/tags/SVN/" style="font-size: 15px;">SVN</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/react-native/" style="font-size: 10px;">react-native</a> <a href="/tags/shell/" style="font-size: 12.5px;">shell</a> <a href="/tags/web-移动端/" style="font-size: 10px;">web 移动端</a> <a href="/tags/前端优化/" style="font-size: 10px;">前端优化</a> <a href="/tags/前端框架原理/" style="font-size: 10px;">前端框架原理</a> <a href="/tags/前端编码规范/" style="font-size: 15px;">前端编码规范</a> <a href="/tags/微信公众号/" style="font-size: 10px;">微信公众号</a> <a href="/tags/页面模板/" style="font-size: 10px;">页面模板</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Dean</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="https://avatars1.githubusercontent.com/u/9653758?v=3&amp;s=460" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Dean</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/TheCrookedMan/thecrookedman.github.com/tree/master" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="react-react-native" class="article article-type-react" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/05/react-native/" class="article-date">
  	<time datetime="2016-04-05T08:01:42.000Z" itemprop="datePublished">2016-04-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/05/react-native/">react-native 入门</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="开发环境搭建"><a href="#开发环境搭建" class="headerlink" title="开发环境搭建"></a>开发环境搭建</h3><ol>
<li>OS X －当前仅支持OS X</li>
<li>推荐使用 <a href="http://brew.sh/index_zh-cn.html" target="_blank" rel="external">Homebrew</a> 的方式来安装 nvm、watchman 和 flow。</li>
<li>安装 <a href="https://nodejs.org/en/" target="_blank" rel="external">Node.js</a> 4.0或者更新的版本。<ul>
<li>使用 Homebrew 来安装 nvm 或者参考 <a href="https://github.com/creationix/nvm#installation" target="_blank" rel="external">它的安装指南</a>。接着运行 <code>nvm install node &amp;&amp; nvm alias default node</code>, 它可以让您安装最新版本的 Node.js 并设置您的终端，所以你可以通过键入 node 来运行它。使用 Nvm 可以让您安装多个版本的 Node.js 并且在它们之间轻松切换。</li>
<li><a href="https://docs.npmjs.com/" target="_blank" rel="external">npm</a> 的更新之处。</li>
</ul>
</li>
<li><code>brew 安装 watchman</code>。我们推荐您安装 <code>watchman</code>, 否则您可能在点击一个节点文件的时候出现错误。</li>
<li><code>brew 安装 flow</code>。如果您想使用 <code>flow</code>.</li>
</ol>
<p>我们建议定期运行 <code>brew update &amp;&amp; brew upgrade</code> 来使您的应用程序保持最新状态。</p>
<h3 id="安装-IOS"><a href="#安装-IOS" class="headerlink" title="安装 IOS"></a>安装 IOS</h3><p>我们需要 <code>Xcode 6.3</code> 或者更高的版本。 您可以在 App 应用商店里面安装它。</p>
<h3 id="安装-Android"><a href="#安装-Android" class="headerlink" title="安装 Android"></a>安装 Android</h3><p>如果想要编写 React Native 安卓应用程序， 您需要安装安卓 SDK （如果您不想在真机上运行您的应用程序，那么您还需要一个安卓模拟器）。请参阅<a href="http://wiki.jikexueyuan.com/project/react-native/DevelopmentSetupAndroid.html" target="_blank" rel="external">安卓安装指南</a> 说明来配置你的安卓环境 。</p>
<h3 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g react-native-cli</span><br><span class="line">$ react-native init AwesomeProject</span><br><span class="line">$ cd AwesomeProject/</span><br></pre></td></tr></table></figure>
<h5 id="运行-iOS-应用程序"><a href="#运行-iOS-应用程序" class="headerlink" title="运行 iOS 应用程序"></a>运行 iOS 应用程序</h5><ul>
<li><code>$ react-native run-android</code></li>
<li>在选定的文本编辑器中打开 <code>index.android.js</code> 并且编辑代码。</li>
<li>按下菜单按钮 （默认情况下是 F2，或在 Genymotion 中点击 ⌘ M），然后选择 Reload JS 看看发生了什么变化！</li>
<li>在一个终端中运行 <code>adb logcat *:S ReactNative:V ReactNativeJS:V</code> 来查看您的应用程序日志。</li>
</ul>
<p>祝贺你！你已经成功运行并修改了你的第一个 <strong><em>React Native</em></strong> 应用程序。</p>
<p>_如果您在开始的时候遇到任何问题，请参阅 <a href="http://facebook.github.io/react-native/docs/troubleshooting.html#content" target="_blank" rel="external">故障诊断页面</a></p>
<h3 id="让安卓支持现有的-React-Native-项目"><a href="#让安卓支持现有的-React-Native-项目" class="headerlink" title="让安卓支持现有的 React Native 项目"></a>让安卓支持现有的 React Native 项目</h3><p>如果您现在已经拥有一个(iOS) React Native 项目并且想让安卓也支持它, 那么您需要在您现有的项目目录中执行以下命令：<br> 1.将您 <code>package.json</code> 文件中的 <code>react-native</code> 目录更新到<a href="https://www.npmjs.com/package/react-native" target="_blank" rel="external">最新的版本</a></p>
<ol>
<li><code>$ npm install</code></li>
<li><code>$ react-native android</code></li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-native/">react-native</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="Swig-Swig使用指南" class="article article-type-Swig" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/30/Swig使用指南/" class="article-date">
  	<time datetime="2016-03-30T15:48:45.000Z" itemprop="datePublished">2016-03-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/30/Swig使用指南/">Swig 使用指南</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://paularmstrong.github.io/swig/docs/filters/">Swig官方文档</a></p>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">swig.init(&#123;</span><br><span class="line">  allowErrors: false,   </span><br><span class="line">  autoescape: true,</span><br><span class="line">  cache: true,</span><br><span class="line">  encoding: &apos;utf8&apos;,</span><br><span class="line">  filters: &#123;&#125;,</span><br><span class="line">  root: &apos;/&apos;,</span><br><span class="line">  tags: &#123;&#125;,</span><br><span class="line">  extensions: &#123;&#125;,</span><br><span class="line">  tzOffset: 0</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="options"><a href="#options" class="headerlink" title="options"></a>options</h4><ol>
<li><p>allowErrors</p>
<p> 默认值为 false。将所有模板解析和编译错误直接输出到模板。如果为 true，则将引发错误，抛出到 Node.js 进程中，可能会使您的应用程序崩溃。</p>
</li>
<li><p>autoescape</p>
<p> 默认true，强烈建议保持。字符转换表请参阅转义过滤器。</p>
<p> true: HTML安全转义 </p>
<p> false: 不转义，除非使用转义过滤器或者转义标签 </p>
<p> ‘js’: js安全转义</p>
</li>
<li><p>cache</p>
<p> 更改为 false 将重新编译每个请求的模板的文件。正式环境建议保持true。</p>
</li>
<li><p>encoding</p>
<p> 模板文件编码</p>
</li>
<li><p>root</p>
<p> 需要搜索模板的目录。如果模板传递给 swig.compileFile 绝对路径(以/开头)，Swig不会在模板root中搜索。如果传递一个数组，使用第一个匹配成功的数组项。 </p>
</li>
<li><p>tzOffset</p>
<p> 设置默认时区偏移量。此设置会使转换日期过滤器会自动的修正相应时区偏移量。</p>
</li>
<li><p>filters</p>
<p>自定义过滤器或者重写默认过滤器，参见自定义过滤器指南。</p>
</li>
<li><p>tags</p>
<p> 自定义标签或者重写默认标签，参见自定义标签指南。</p>
</li>
<li><p>extensions</p>
<p> 添加第三方库，可以在编译模板时使用，参见参见自定义标签指南。</p>
</li>
</ol>
<h2 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var tpl = swig.compileFile(&quot;path/to/template/file.html&quot;);</span><br><span class="line">var renderedHtml = tpl.render(&#123; vars: &apos;to be inserted in template&apos; &#125;);</span><br></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var tpl = swig.compile(&quot;Template string here&quot;);</span><br><span class="line">var renderedHtml = tpl(&#123; vars: &apos;to be inserted in template&apos; &#125;);</span><br></pre></td></tr></table></figure>
<h4 id="结合Express"><a href="#结合Express" class="headerlink" title="结合Express"></a>结合Express</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install express</span><br><span class="line">npm install consolidate</span><br></pre></td></tr></table></figure>
<p>然后</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.engine(&apos;.html&apos;, cons.swig);</span><br><span class="line">app.set(&apos;view engine&apos;, &apos;html&apos;);</span><br></pre></td></tr></table></figure>
<h4 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h4><p>Swig浏览器版本的api基本与nodejs版相同，不同点如下：</p>
<ol>
<li>不能使用swig.compileFile，浏览器没有文件系统</li>
<li>你必须提前使用swig.compile编译好模板</li>
<li>按顺序使用extends, import, and include，同时在swig.compile里使用参数templateKey来查找模板</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var template = swig.compile(&apos;&lt;p&gt;｛% block content %｝｛% endblock %｝&lt;/p&gt;&apos;, &#123; filename: &apos;main&apos; &#125;);</span><br><span class="line">var mypage = swig.compile(&apos;｛% extends &quot;main&quot; %｝｛% block content %｝Oh hey there!｛% endblock %｝&apos;, &#123; filename: &apos;mypage&apos; &#125;);</span><br></pre></td></tr></table></figure>
<h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; foo.bar &#125;&#125;</span><br><span class="line">&#123;&#123; foo[&apos;bar&apos;] &#125;&#125;</span><br></pre></td></tr></table></figure>
<p>如果变量未定义，输出空字符。</p>
<p>变量可以通过过滤器来修改：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; name|title &#125;&#125; was born on &#123;&#123; birthday|date(&apos;F jS, Y&apos;) &#125;&#125;</span><br><span class="line">// Jane was born on July 6th, 1985</span><br></pre></td></tr></table></figure>
<h3 id="逻辑标签"><a href="#逻辑标签" class="headerlink" title="逻辑标签"></a>逻辑标签</h3><p>参见标签部分。</p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><h3 id="空白"><a href="#空白" class="headerlink" title="空白"></a>空白</h3><p>模板里的空白在最终输出时默认保留，如果需要去掉空白，可以在逻辑标签前后加上空白控制服-：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">｛% for item in seq -%｝</span><br><span class="line">    &#123;&#123; item &#125;&#125;</span><br><span class="line">｛%- endfor %｝</span><br></pre></td></tr></table></figure>
<h3 id="模板继承"><a href="#模板继承" class="headerlink" title="模板继承"></a>模板继承</h3><p>Swig 使用 extends 和 block 来实现模板继承</p>
<h5 id="layout-html"><a href="#layout-html" class="headerlink" title="layout.html"></a>layout.html</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;｛% block title %｝My Site｛% endblock %｝&lt;/title&gt;</span><br><span class="line">    ｛% block head %｝</span><br><span class="line">        &lt;link rel=&quot;stylesheet&quot; href=&quot;main.css&quot;&gt;</span><br><span class="line">    ｛% endblock %｝</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    ｛% block content %｝｛% endblock %｝</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h5 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">｛% extends &apos;layout.html&apos; %｝</span><br><span class="line"></span><br><span class="line">｛% block title %｝My Page｛% endblock %｝</span><br><span class="line"></span><br><span class="line">｛% block head %｝</span><br><span class="line">｛% parent %｝</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;custom.css&quot;&gt;</span><br><span class="line">｛% endblock %｝</span><br><span class="line"></span><br><span class="line">｛% block content %｝</span><br><span class="line">    &lt;p&gt;This is just an awesome page.&lt;/p&gt;</span><br><span class="line">｛% endblock %｝</span><br></pre></td></tr></table></figure>
<h3 id="变量过滤器"><a href="#变量过滤器" class="headerlink" title="变量过滤器"></a>变量过滤器</h3><p>用于修改变量。变量名称后用 | 字符分隔添加过滤器。您可以添加多个过滤器。</p>
<h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; name|title &#125;&#125; was born on &#123;&#123; birthday|date(&apos;F jS, Y&apos;) &#125;&#125; and has &#123;&#123;bikes｜length|default(&apos;zero&apos;)&#125;&#125; bikes.</span><br></pre></td></tr></table></figure>
<p>也可以使用 filter 标签来为块内容添加过滤器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">｛% filter upper %｝oh hi, paul｛% endfilter %｝</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/页面模板/">页面模板</a></li></ul>
	</div>

      

      
        <p class="article-more-link">
          <a  href="/2016/03/30/Swig使用指南/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="css-css-study/position/clip" class="article article-type-css" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/06/css-study/position/clip/" class="article-date">
  	<time datetime="2016-03-05T16:33:26.000Z" itemprop="datePublished">2016-03-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/06/css-study/position/clip/">CSS3 clip-path polygon图形构建</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>转载自：<a href="http://www.zhangxinxu.com/wordpress/2015/03/css3-clip-path-polygon-shape-transition-animation/" target="_blank" rel="external">http://www.zhangxinxu.com/wordpress/2015/03/css3-clip-path-polygon-shape-transition-animation/</a></p>
<h3 id="一、-温故"><a href="#一、-温故" class="headerlink" title="一、 温故"></a>一、 温故</h3><p>关于CSS3 <code>clip-path</code>, 去年圣诞节前前前夕写了篇名为“CSS3/SVG <code>clip-path</code>路径剪裁遮罩属性简介”文章介绍了。不过是简介，很多内容是一笔带过。</p>
<p>CSS3中的<code>clip-path</code>可以遮罩很多图形，例如矩形<code>rectangle</code>, 圆<code>circle</code>, 椭圆<code>ellipse</code>, 多边形<code>polygon</code>, 以及<code>inset</code>剪裁。</p>
<p>其中，polygon多边形构建频频出现了我的视野中，不知是贪图我的美色还是其他什么原因，总之，它成功了，成功引起了我关注。于是，按照虐心剧剧本一贯的尿性，男主和X主发生了很多情感上的纠葛。这里特意呈现给大家，满足大家八卦的天性。</p>
<h3 id="二、成形"><a href="#二、成形" class="headerlink" title="二、成形"></a>二、成形</h3><p><code>clip-path</code>的前身是SVG, 所以，我们的坐标都是二维的。</p>
<p><code>polygon</code>的作用就是根据二维点坐标，依次连线，最后所形成的区域就是我们的遮罩区域了。</p>
<p><img src="/photo/css/position/2015-03-25_231542.png" alt=""></p>
<p>即下图代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html class=&quot;&quot;&gt;&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;meta name=&quot;robots&quot; content=&quot;noindex&quot;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">div &#123;</span><br><span class="line">  width: 160px;</span><br><span class="line">  height: 160px;</span><br><span class="line">  background: #333;</span><br><span class="line">  float: left;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(1) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px, 160px 80px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(2) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(0px 80px, 160px 80px, 0px 80px, 160px 80px, 0px 80px, 160px 80px, 0px 80px, 160px 80px, 0px 80px, 160px 80px, 0px 80px, 160px 80px, 0px 80px, 160px 80px, 0px 80px, 160px 80px, 0px 80px, 160px 80px, 0px 80px, 160px 80px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(3) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(40px 149.28203px, 40px 10.71797px, 160px 80px, 40px 149.28203px, 40px 10.71797px, 160px 80px, 40px 149.28203px, 40px 10.71797px, 160px 80px, 40px 149.28203px, 40px 10.71797px, 160px 80px, 40px 149.28203px, 40px 10.71797px, 160px 80px, 40px 149.28203px, 40px 10.71797px, 160px 80px, 40px 149.28203px, 40px 10.71797px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(4) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(80px 160px, 0px 80px, 80px 0px, 160px 80px, 80px 160px, 0px 80px, 80px 0px, 160px 80px, 80px 160px, 0px 80px, 80px 0px, 160px 80px, 80px 160px, 0px 80px, 80px 0px, 160px 80px, 80px 160px, 0px 80px, 80px 0px, 160px 80px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(5) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(104.72136px 156.08452px, 15.27864px 127.02282px, 15.27864px 32.97718px, 104.72136px 3.91548px, 160px 80px, 104.72136px 156.08452px, 15.27864px 127.02282px, 15.27864px 32.97718px, 104.72136px 3.91548px, 160px 80px, 104.72136px 156.08452px, 15.27864px 127.02282px, 15.27864px 32.97718px, 104.72136px 3.91548px, 160px 80px, 104.72136px 156.08452px, 15.27864px 127.02282px, 15.27864px 32.97718px, 104.72136px 3.91548px, 160px 80px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(6) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(120px 149.28203px, 40px 149.28203px, 0px 80px, 40px 10.71797px, 120px 10.71797px, 160px 80px, 120px 149.28203px, 40px 149.28203px, 0px 80px, 40px 10.71797px, 120px 10.71797px, 160px 80px, 120px 149.28203px, 40px 149.28203px, 0px 80px, 40px 10.71797px, 120px 10.71797px, 160px 80px, 120px 149.28203px, 40px 149.28203px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(7) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(129.87918px 142.54652px, 62.19833px 157.99423px, 7.92249px 114.7107px, 7.92249px 45.2893px, 62.19833px 2.00577px, 129.87918px 17.45348px, 160px 80px, 129.87918px 142.54652px, 62.19833px 157.99423px, 7.92249px 114.7107px, 7.92249px 45.2893px, 62.19833px 2.00577px, 129.87918px 17.45348px, 160px 80px, 129.87918px 142.54652px, 62.19833px 157.99423px, 7.92249px 114.7107px, 7.92249px 45.2893px, 62.19833px 2.00577px, 129.87918px 17.45348px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(8) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(136.56854px 136.56854px, 80px 160px, 23.43146px 136.56854px, 0px 80px, 23.43146px 23.43146px, 80px 0px, 136.56854px 23.43146px, 160px 80px, 136.56854px 136.56854px, 80px 160px, 23.43146px 136.56854px, 0px 80px, 23.43146px 23.43146px, 80px 0px, 136.56854px 23.43146px, 160px 80px, 136.56854px 136.56854px, 80px 160px, 23.43146px 136.56854px, 0px 80px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(9) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(141.28356px 131.42301px, 93.89185px 158.78462px, 40px 149.28203px, 4.82459px 107.36161px, 4.82459px 52.63839px, 40px 10.71797px, 93.89185px 1.21538px, 141.28356px 28.57699px, 160px 80px, 141.28356px 131.42301px, 93.89185px 158.78462px, 40px 149.28203px, 4.82459px 107.36161px, 4.82459px 52.63839px, 40px 10.71797px, 93.89185px 1.21538px, 141.28356px 28.57699px, 160px 80px, 141.28356px 131.42301px, 93.89185px 158.78462px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(10) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(144.72136px 127.02282px, 104.72136px 156.08452px, 55.27864px 156.08452px, 15.27864px 127.02282px, 0px 80px, 15.27864px 32.97718px, 55.27864px 3.91548px, 104.72136px 3.91548px, 144.72136px 32.97718px, 160px 80px, 144.72136px 127.02282px, 104.72136px 156.08452px, 55.27864px 156.08452px, 15.27864px 127.02282px, 0px 80px, 15.27864px 32.97718px, 55.27864px 3.91548px, 104.72136px 3.91548px, 144.72136px 32.97718px, 160px 80px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(11) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(147.30028px 123.25127px, 113.2332px 152.77056px, 68.61481px 159.18572px, 27.61114px 140.45997px, 3.24056px 102.5386px, 3.24056px 57.4614px, 27.61114px 19.54003px, 68.61481px 0.81428px, 113.2332px 7.22944px, 147.30028px 36.74873px, 160px 80px, 147.30028px 123.25127px, 113.2332px 152.77056px, 68.61481px 159.18572px, 27.61114px 140.45997px, 3.24056px 102.5386px, 3.24056px 57.4614px, 27.61114px 19.54003px, 68.61481px 0.81428px, 113.2332px 7.22944px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(12) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(149.28203px 120px, 120px 149.28203px, 80px 160px, 40px 149.28203px, 10.71797px 120px, 0px 80px, 10.71797px 40px, 40px 10.71797px, 80px 0px, 120px 10.71797px, 149.28203px 40px, 160px 80px, 149.28203px 120px, 120px 149.28203px, 80px 160px, 40px 149.28203px, 10.71797px 120px, 0px 80px, 10.71797px 40px, 40px 10.71797px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(13) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(150.83648px 117.17785px, 125.44518px 145.83871px, 89.64293px 159.41671px, 51.63161px 154.8013px, 20.11914px 133.04981px, 2.32465px 99.14525px, 2.32465px 60.85475px, 20.11914px 26.95019px, 51.63161px 5.1987px, 89.64293px 0.58329px, 125.44518px 14.16129px, 150.83648px 42.82215px, 160px 80px, 150.83648px 117.17785px, 125.44518px 145.83871px, 89.64293px 159.41671px, 51.63161px 154.8013px, 20.11914px 133.04981px, 2.32465px 99.14525px, 2.32465px 60.85475px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(14) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(152.07751px 114.7107px, 129.87918px 142.54652px, 97.80167px 157.99423px, 62.19833px 157.99423px, 30.12082px 142.54652px, 7.92249px 114.7107px, 0px 80px, 7.92249px 45.2893px, 30.12082px 17.45348px, 62.19833px 2.00577px, 97.80167px 2.00577px, 129.87918px 17.45348px, 152.07751px 45.2893px, 160px 80px, 152.07751px 114.7107px, 129.87918px 142.54652px, 97.80167px 157.99423px, 62.19833px 157.99423px, 30.12082px 142.54652px, 7.92249px 114.7107px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(15) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(153.08364px 112.53893px, 133.53045px 139.45159px, 104.72136px 156.08452px, 71.63772px 159.56175px, 40px 149.28203px, 15.27864px 127.02282px, 1.74819px 96.63294px, 1.74819px 63.36706px, 15.27864px 32.97718px, 40px 10.71797px, 71.63772px 0.43825px, 104.72136px 3.91548px, 133.53045px 20.54841px, 153.08364px 47.46107px, 160px 80px, 153.08364px 112.53893px, 133.53045px 139.45159px, 104.72136px 156.08452px, 71.63772px 159.56175px, 40px 149.28203px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(16) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(153.91036px 110.61467px, 136.56854px 136.56854px, 110.61467px 153.91036px, 80px 160px, 49.38533px 153.91036px, 23.43146px 136.56854px, 6.08964px 110.61467px, 0px 80px, 6.08964px 49.38533px, 23.43146px 23.43146px, 49.38533px 6.08964px, 80px 0px, 110.61467px 6.08964px, 136.56854px 23.43146px, 153.91036px 49.38533px, 160px 80px, 153.91036px 110.61467px, 136.56854px 136.56854px, 110.61467px 153.91036px, 80px 160px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(17) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(154.59778px 108.89933px, 139.12071px 133.89565px, 115.65907px 151.61306px, 87.38147px 159.65873px, 58.10696px 156.94605px, 31.78923px 143.84138px, 11.98263px 122.11457px, 1.36215px 94.69996px, 1.36215px 65.30004px, 11.98263px 37.88543px, 31.78923px 16.15862px, 58.10696px 3.05395px, 87.38147px 0.34127px, 115.65907px 8.38694px, 139.12071px 26.10435px, 154.59778px 51.10067px, 160px 80px, 154.59778px 108.89933px, 139.12071px 133.89565px, 115.65907px 151.61306px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(18) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(155.17541px 107.36161px, 141.28356px 131.42301px, 120px 149.28203px, 93.89185px 158.78462px, 66.10815px 158.78462px, 40px 149.28203px, 18.71644px 131.42301px, 4.82459px 107.36161px, 0px 80px, 4.82459px 52.63839px, 18.71644px 28.57699px, 40px 10.71797px, 66.10815px 1.21538px, 93.89185px 1.21538px, 120px 10.71797px, 141.28356px 28.57699px, 155.17541px 52.63839px, 160px 80px, 155.17541px 107.36161px, 141.28356px 131.42301px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(19) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(155.66538px 105.97596px, 143.13124px 129.13702px, 123.75585px 146.97332px, 99.63884px 157.55202px, 73.39365px 159.72676px, 47.86437px 153.26187px, 25.81747px 138.85791px, 9.6421px 118.07579px, 1.0911px 93.16757px, 1.0911px 66.83243px, 9.6421px 41.92421px, 25.81747px 21.14209px, 47.86437px 6.73813px, 73.39365px 0.27324px, 99.63884px 2.44798px, 123.75585px 13.02668px, 143.13124px 30.86298px, 155.66538px 54.02404px, 160px 80px, 155.66538px 105.97596px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div:nth-child(20) &#123;</span><br><span class="line">  -webkit-clip-path: polygon(156.08452px 104.72136px, 144.72136px 127.02282px, 127.02282px 144.72136px, 104.72136px 156.08452px, 80px 160px, 55.27864px 156.08452px, 32.97718px 144.72136px, 15.27864px 127.02282px, 3.91548px 104.72136px, 0px 80px, 3.91548px 55.27864px, 15.27864px 32.97718px, 32.97718px 15.27864px, 55.27864px 3.91548px, 80px 0px, 104.72136px 3.91548px, 127.02282px 15.27864px, 144.72136px 32.97718px, 156.08452px 55.27864px, 160px 80px);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;&lt;/head&gt;&lt;body&gt;</span><br><span class="line">&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>上面截图就是1个点~20个点绘制的多边形效果。大家可以看到趋势，点越多，最后的多边形越接近圆形。所以，如果你要是闲的蛋疼，可以用100个点模拟一个圆。</p>
<p>我们实际应用的时候，5个角以上的多边形是不会用到的。</p>
<p>最常用的估计就是三角效果了。</p>
<p>10年的时候有介绍<a href="http://www.zhangxinxu.com/wordpress/2010/05/css-border%E4%B8%89%E8%A7%92%E3%80%81%E5%9C%86%E8%A7%92%E5%9B%BE%E5%BD%A2%E7%94%9F%E6%88%90%E6%8A%80%E6%9C%AF%E7%AE%80%E4%BB%8B/" target="_blank" rel="external">“CSS border三角、圆角图形生成技术简介”</a>，可以使用border属性生成各类三角效果：</p>
<p><img src="/photo/css/position/2010-03-13_003545.png" alt=""></p>
<p>相比而言，<code>clip-path</code>家族的<code>polygon</code>生成三角要更简单也更强大。</p>
<p>打个背景色，搞三个点就可以了，例如(自身尺寸20px*20px)：</p>
<pre><code>.path {
    clip-path: polygon(5px 10px, 16px 3px, 16px 17px);
}
</code></pre><p>于是呈现：</p>
<p><img src="/photo/css/position/2015-03-25_232746.png" alt=""></p>
<p>当然，我们可以把其中任意一个点的坐标弄偏一点，于是，我们就可以出炉一个不规则的三角效果，这是之前三角生成技术所不具备的。</p>
<p><a href="http://www.zhangxinxu.com/study/201503/css3-clip-path-polygon.html" target="_blank" rel="external">CSS3 clip-path之polygon绘图与动画Demo</a></p>
<p><a href="http://species-in-pieces.com/" target="_blank" rel="external">30个动物，30种变换，主要就是使用clip-path polygon实现</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="css-css-study/position/position_sticky_的使用" class="article article-type-css" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/03/css-study/position/position_sticky_的使用/" class="article-date">
  	<time datetime="2016-03-03T05:25:28.000Z" itemprop="datePublished">2016-03-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/03/css-study/position/position_sticky_的使用/">position:sticky实现iOS6+下的粘性布局</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="转载自http-efe-baidu-com-blog-position-sticky"><a href="#转载自http-efe-baidu-com-blog-position-sticky" class="headerlink" title="转载自http://efe.baidu.com/blog/position-sticky/"></a>转载自<a href="http://efe.baidu.com/blog/position-sticky/">http://efe.baidu.com/blog/position-sticky/</a></h4><p>用户总是希望在窗口明显的地方方便找到自己想要的操作项，例如停留在浏览器窗口顶端的菜单栏，筛选栏等。所以我们会把用户最常用到或者我们希望用户注意到的内容一直展现在窗口的可视区域，让用户能够一眼就看到。这当中常需要用到一种页面滚动然后元素固定在窗口的某个位置的布局方式（下面简称 <strong>粘性布局</strong>）。<br>要实现这种粘性布局，我们常常都是通过js来模拟，实现方案是通过js监听window的scroll事件，当需要固定的元素滚动到窗口顶部时，把元素的position属性设置为fixed，否则，取消fixed，简单的js代码如下：</p>
<pre><code>var nav = document.querySelector(&apos;.nav&apos;);
var navOffsetY = nav.offsetTop;
function onScroll(e) {
    window.scrollY &gt;= navOffsetY?nav.classList.add(&apos;fixed&apos;) : nav.classList.remove(&apos;fixed&apos;); 
}
window.addEventListener(&apos;scroll&apos;, onScroll);
</code></pre><p>上面的实现在桌面浏览器的表现还是挺好的，但是在移动端浏览器上粘顶的效果就显得不那么平滑了。</p>
<p>特别是在iOS设备上，iOS下的浏览器会在页面滚动的时候，暂停所有js的执行，直到滚动停止才会继续去执行js（注意暂停了所有js的执行，所以考虑用<code>setTimeout</code>或<code>setInterval</code>也是没有用的）。所以页面滚动时，<code>scroll</code>事件在iOS的浏览器下并不会持续被触发，而是在页面滚动停止后，才会去触发一次<code>scroll</code>事件。 在Android 2.3及以下的版本的浏览器<code>scroll</code>事件的响应也是跟iOS一样。而Android 2.3以上的版本中虽然有部分浏览器能持续的触发<code>scroll</code>事件，但由于移动设备上惯性滚动的原因，<code>scroll</code>事件的回调函数执行渲染Dom频率还是赶不上滚动的频率，所以即使是在高版本的Android下，滚动快了，还是会看到原来fixed的元素闪跳归位。</p>
<p>下面我们来做一个<code>scroll</code>事件的测试：</p>
<pre><code>var count = 0;
var num = document.querySelector(&apos;#num&apos;);
window.addEventListener(&apos;scroll&apos;, function () {
    num.innerHTML = ++count;
});
</code></pre><p>下图分别是测试代码在iphone 5s（iOS 7.1.1）和红米 1S（Android 4.3）中的表现：<br><img src="/photo/css/position/ios-scroll-test.gif" alt=""><img src="/photo/css/position/android-scroll-test.gif" alt=""></p>
<pre><code>&lt;!-- position sticky 的css2兼容方法 --&gt;
&lt;style&gt;
body {
    margin: 0;
    text-align: center;
    font-family: sans-serif;
}

.fixed {
    position: fixed;
    top: 0;
}

.sticky {
    width: 100%;
    background: #F6D565;
    padding: 25px 0;
    text-transform: uppercase;
}
&lt;/style&gt;
&lt;p style=&quot;margin-bottom:100px;&quot;&gt;Scroll this page.&lt;/p&gt;
&lt;div class=&quot;sticky&quot;&gt;
    &lt;h3&gt;Super amazing header&lt;/h3&gt;&lt;/div&gt;
&lt;p style=&quot;margin-top:500px;&quot;&gt;Still there?&lt;/p&gt;
&lt;p style=&quot;margin-top:500px;&quot;&gt;Yep!&lt;/p&gt;
&lt;p style=&quot;margin-top:500px;&quot;&gt;Scroll so hard!&lt;/p&gt;
&lt;script&gt;
var sticky = document.querySelector(&apos;.sticky&apos;);
var origOffsetY = sticky.offsetTop;

function onScroll(e) {
    window.scrollY &gt;= origOffsetY ? sticky.classList.add(&apos;fixed&apos;) :
        sticky.classList.remove(&apos;fixed&apos;);
}

document.addEventListener(&apos;scroll&apos;, onScroll);
&lt;/script&gt;
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li></ul>
	</div>

      

      
        <p class="article-more-link">
          <a  href="/2016/03/03/css-study/position/position_sticky_的使用/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="css-web移动端/Web移动端Fixed布局的解决方案" class="article article-type-css" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/03/web移动端/Web移动端Fixed布局的解决方案/" class="article-date">
  	<time datetime="2016-03-03T05:23:01.000Z" itemprop="datePublished">2016-03-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/03/web移动端/Web移动端Fixed布局的解决方案/">Web移动端Fixed布局的解决方案</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>转载自:<a href="http://efe.baidu.com/blog/mobile-fixed-layout/" target="_blank" rel="external">http://efe.baidu.com/blog/mobile-fixed-layout/</a></p>
<p>移动端业务开发，iOS 下经常会有 fixed 元素和输入框(input 元素)同时存在的情况。 但是 fixed 元素在有软键盘唤起的情况下，会出现许多莫名其妙的问题。 这篇文章里就提供一个简单的有输入框情况下的 fixed 布局方案。</p>
<hr>
<h3 id="iOS下的-Fixed-Input-BUG现象"><a href="#iOS下的-Fixed-Input-BUG现象" class="headerlink" title="iOS下的 Fixed + Input BUG现象"></a>iOS下的 Fixed + Input BUG现象</h3><p>让我们先举个栗子，最直观的说明一下这个 BUG 的现象。 常规的 fixed 布局，可能使用如下布局（以下仅示意代码）：</p>
<pre><code>&lt;body class=&quot;layout-fixed&quot;&gt;
    &lt;!-- fixed定位的头部 --&gt;
    &lt;header&gt;

    &lt;/header&gt;

    &lt;!-- 可以滚动的区域 --&gt;
    &lt;main&gt;
        &lt;!-- 内容在这里... --&gt;
    &lt;/main&gt;

    &lt;!-- fixed定位的底部 --&gt;
    &lt;footer&gt;
        &lt;input type=&quot;text&quot; placeholder=&quot;Footer...&quot;/&gt;
        &lt;button class=&quot;submit&quot;&gt;提交&lt;/button&gt;
    &lt;/footer&gt;
&lt;/body&gt;
</code></pre><p>对应的样式如下：</p>
<pre><code>header, footer, main {
    display: block;
}

header {
    position: fixed;
    height: 50px;
    left: 0;
    right: 0;
    top: 0;
}

footer {
    position: fixed;
    height: 34px;
    left: 0;
    right: 0;
    bottom: 0;
}

main {
    margin-top: 50px;
    margin-bottom: 34px;
    height: 2000px
}
</code></pre><p>然后看起来就是下面这个样子。拖动页面时 header 和 footer 已经定位在了对应的位置，目测没问题了。</p>
<p><img src="/photo/Web移动端Fixed布局的解决方案/fixed.png" alt=""><br><code>fixed定位</code></p>
<p>但接下来问题就来了！如果底部输入框软键盘被唤起以后，再次滑动页面，就会看到如下图所示：<br><img src="/photo/Web移动端Fixed布局的解决方案/fixed_bug_0.png" alt=""><img src="/photo/Web移动端Fixed布局的解决方案/fixed_bug_1.png" alt=""></p>
<p>我们看到 fixed 定位好的元素跟随页面滚动了起来… fixed 属性失效了！</p>
<p>这是为什么呢？简单解释下： <strong>&gt; 软键盘唤起后，页面的 fixed 元素将失效（即无法浮动，也可以理解为变成了 absolute 定位），所以当页面超过一屏且滚动时，失效的 fixed 元素就会跟随滚动了。</strong></p>
<p>这便是 iOS 上 fixed 元素和输入框的 bug 。其中不仅限于 type=text 的输入框，凡是软键盘（比如时间日期选择、select 选择等等）被唤起，都会遇到同样地问题。</p>
<hr>
<p>虽然 <code>isScroll.js</code> 可以很好的解决 fixed 定位滚动的问题，但是不在万不得已的情况下，我们尽量尝试一下不依赖第三方库的布局方案，以简化实现方式。这里抛砖引玉作为参考。</p>
<h3 id="解决思路："><a href="#解决思路：" class="headerlink" title="解决思路："></a>解决思路：</h3><p>既然在 iOS 下由于软键盘唤出后，页面 fixed 元素会失效，导致跟随页面一起滚动，那么<strong>假如——页面不会过长出现滚动，那么即便 fixed 元素失效，也无法跟随页面滚动，也就不会出现上面的问题了。</strong></p>
<p>那么按照这个思路，如果使 fixed 元素的父级不出现滚动，而将原 body 滚动的区域域移到 main 内部，而 header 和 footer 的样式不变，代码如下：</p>
<pre><code>&lt;body class=&quot;layout-scroll-fixed&quot;&gt;
    &lt;!-- fixed定位的头部 --&gt;
    &lt;header&gt;

    &lt;/header&gt;

    &lt;!-- 可以滚动的区域 --&gt;
    &lt;main&gt;
        &lt;div class=&quot;content&quot;&gt;
        &lt;!-- 内容在这里... --&gt;
        &lt;/div&gt;
    &lt;/main&gt;

    &lt;!-- fixed定位的底部 --&gt;
    &lt;footer&gt;
        &lt;input type=&quot;text&quot; placeholder=&quot;Footer...&quot;/&gt;
        &lt;button class=&quot;submit&quot;&gt;提交&lt;/button&gt;
    &lt;/footer&gt;
&lt;/body&gt;




header, footer, main {
    display: block;
}

header {
    position: fixed;
    height: 50px;
    left: 0;
    right: 0;
    top: 0;
}

footer {
    position: fixed;
    height: 34px;
    left: 0;
    right: 0;
    bottom: 0;
}

main {
    /* main绝对定位，进行内部滚动 */
    position: absolute;
    top: 50px;
    bottom: 34px;
    /* 使之可以滚动 */
    overflow-y: scroll;
}

main .content {
    height: 2000px;
}
</code></pre><p>这样再来看一下：<br><img src="/photo/Web移动端Fixed布局的解决方案/fixed_scroll_0.png" alt=""></p>
<p><code>fixed定位</code><br>在原始输入法下， fixed 元素可以定位在页面的正确位置。滚动页面时，由于滚动的是 main 内部的 div，因此 footer 没有跟随页面滚动。</p>
<p>上面貌似解决了问题，但是如果在手机上实际测试一下，会发现 main 元素内的滚动非常不流畅，滑动的手指松开后，滚动立刻停止，失去了原本的流畅滚动特性。百度一下弹性滚动的问题，发现在 webkit 中，下面的属性可以恢复弹性滚动。</p>
<blockquote>
<p>-webkit-overflow-scrolling: touch;</p>
</blockquote>
<p>在 main 元素上加上该属性，嗯，丝般顺滑的感觉又回来了！</p>
<pre><code>main {
    /* main绝对定位，进行内部滚动 */
    position: absolute;
    top: 50px;
    bottom: 34px;
    /* 使之可以滚动 */
    overflow-y: scroll;
    /* 增加该属性，可以增加弹性 */
    -webkit-overflow-scrolling: touch;
}
</code></pre><p>另外，这里的 header 和 footer 使用的是 fixed 定位，如果考虑到更老一些的 iOS 系统不支持 fixed 元素，完全可以把 fixed 替换成 absolute 。测试后效果是一样的。</p>
<p>至此一个不依赖第三方库的 fixed 布局就完成了。</p>
<hr>
<h4 id="Android-下布局"><a href="#Android-下布局" class="headerlink" title="Android 下布局"></a>Android 下布局</h4><p>谈到了 iOS ，也来简单说一下 Android 下的布局吧。</p>
<p>在 Android2.3+ 中，因为不支持 overflow-scrolling ，因此部分浏览器内滚动会有不流畅的卡顿。但是目前发现在 body 上的滚动还是很流畅的，因此使用第一种在 iOS 出现问题的 fixed 定位的布局就可以了。</p>
<p>如果需要考虑 Android2.3 以下系统，因为不支持 fixed 元素，所以依然要需要考虑使用 isScroll.js 来实现内部滚动。</p>
<p>其实在 fixed 和输入框的问题上，基本思路就是： &gt; 由于 fixed 在软键盘唤起后会失效，导致在页面可以滚动时，会跟随页面一起滚动。因此如果页面无法滚动，那么 fixed 元素即使失效，也不会滚动，也就不会出现 bug 了。</p>
<p>所以可以在这个方面去考虑解决问题。</p>
<hr>
<h4 id="其他的一些细节处理"><a href="#其他的一些细节处理" class="headerlink" title="其他的一些细节处理"></a>其他的一些细节处理</h4><p>在细节处理上，其实还有很多要注意的，挑几个实际遇到比较大的问题来说一下：</p>
<ol>
<li>有时候输入框 focus 以后，会出现软键盘遮挡输入框的情况，这时候可以尝试 input 元素的 scrollIntoView 进行修复。</li>
<li>在 iOS 下使用第三方输入法时，输入法在唤起经常会盖住输入框，只有在输入了一条文字后，输入框才会浮出。目前也不知道有什么好的办法能让唤起输入框时正确显示。这暂时算是 iOS 下的一个坑吧。</li>
<li>有些第三方浏览器底部的工具栏是浮在页面之上的，因此底部 fixed 定位会被工具栏遮挡。解决办法也比较简单粗暴——适配不同的浏览器，调整 fixed 元素距离底部的距离。</li>
<li>最好将 header 和 footer 元素的 touchmove 事件禁止，以防止滚动在上面触发了部分浏览器全屏模式切换，而导致顶部地址栏和底部工具栏遮挡住 header 和 footer 元素。</li>
<li>在页面滚动到上下边缘的时候，如果继续拖拽会将整个 View 一起拖拽走，导致页面的“露底”。</li>
</ol>
<p><img src="/photo/Web移动端Fixed布局的解决方案/fixed_pull_over.png" alt=""><br><code>fixed 定位</code></p>
<p>为了防止页面露底，可以在页面拖拽到边缘的时候，通过判断拖拽方向以及是否为边缘来阻止 touchmove 事件，防止页面继续拖拽。</p>
<p>以上面内滚动 layout-scroll-fixed 布局为例，给出一段代码作为参考：</p>
<pre><code>// 防止内容区域滚到底后引起页面整体的滚动
var content = document.querySelector(&apos;main&apos;);
var startY;

content.addEventListener(&apos;touchstart&apos;, function (e) {
    startY = e.touches[0].clientY;
});

content.addEventListener(&apos;touchmove&apos;, function (e) {
    // 高位表示向上滚动
    // 底位表示向下滚动
    // 1容许 0禁止
    var status = &apos;11&apos;;
    var ele = this;

    var currentY = e.touches[0].clientY;

    if (ele.scrollTop === 0) {
        // 如果内容小于容器则同时禁止上下滚动
        status = ele.offsetHeight &gt;= ele.scrollHeight ? &apos;00&apos; : &apos;01&apos;;
    } else if (ele.scrollTop + ele.offsetHeight &gt;= ele.scrollHeight) {
        // 已经滚到底部了只能向上滚动
        status = &apos;10&apos;;
    }

    if (status != &apos;11&apos;) {
        // 判断当前的滚动方向
        var direction = currentY - startY &gt; 0 ? &apos;10&apos; : &apos;01&apos;;
        // 操作方向和当前允许状态求与运算，运算结果为0，就说明不允许该方向滚动，则禁止默认事件，阻止滚动
        if (!(parseInt(status, 2) &amp; parseInt(direction, 2))) {
            stopEvent(e);
        }
    }
});
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web-移动端/">web 移动端</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="photo-微信工作号调试方案" class="article article-type-photo" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/03/微信工作号调试方案/" class="article-date">
  	<time datetime="2016-03-02T18:44:43.000Z" itemprop="datePublished">2016-03-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/03/微信工作号调试方案/">微信工作号调试方案</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="第一步：Ngrok-内网穿透利器"><a href="#第一步：Ngrok-内网穿透利器" class="headerlink" title="第一步：Ngrok 内网穿透利器"></a>第一步：<a href="http://www.ngrok.cc/" target="_blank" rel="external">Ngrok</a> 内网穿透利器</h2><p>在开发一个项目的时候,经常会遇到我们的项目,需要外网方法测试的情况.比如我们在开发一个callback接口,这时候需要客户那边调我们这个接口,我们才能测试.但是我们是在内网开发,如果要让任何人都能访问我们,我们必须把这个项目放上线,并且配置好域名指向,才可以.</p>
<p>还有一种情况,就是我们要做一个OAuth的登陆,比如我们的这个项目,支持使用微博登陆或者其它第三方账号登录的情况.OAuth认证成功后,会把相关信息给到我们,给我们的时候,我们需要一个回调地址,但是我们在开发啊,这个时候怎么办.</p>
<p>还有就是我们正在开发的项目,想让外网访问,以跟用户确认我们目前开发的项目,是符合他们需求的.以避免以后无止境的修改.这个时候,又要怎么办.</p>
<p>可能有的人会去花生壳或者其它动态域名工具,这确实是一种解决方案,不过我想说的是,这种方法弱爆了.真正好用的工具是Ngrok! 不爽的是,你肯定猜的到,反正好东西,都被墙的差不多了,这个也不例外,好在国内有好心人,提供了国内的服务,而且免费,不用白不用.官方网址: <a href="http://www.ngrok.cc/" target="_blank" rel="external">http://www.ngrok.cc/</a><br>需要先在平台注册 </p>
<p>下载完ngrok之后,就可以简单的使用了,它有各操作系统版本,我这里是Max os 的.所以简单介绍一下这个东西怎么用</p>
<pre><code>./ngrok -config ngrok.cfg -subdomain wcy 9528
</code></pre><p>上面的 <strong>subd0main</strong>中 的 <strong>wcy</strong> 需要在 <a href="http://www.ngrok.cc/" target="_blank" rel="external">http://www.ngrok.cc/</a> 管理后台配置。</p>
<p><img src="/photo/ngrok/1724657D-FC57-4BAE-84C0-F21F1FE1C0F9.png" alt="ngrok" title=" "></p>
<p><a href="http://wcy.ngrok.cc来访问你本地的应用了,访问这个地址,就相当于是访问了" target="_blank" rel="external">http://wcy.ngrok.cc来访问你本地的应用了,访问这个地址,就相当于是访问了</a> <a href="http://localhost:9528/,因为我们上面指定了映射到本地的9528端口的" target="_blank" rel="external">http://localhost:9528/,因为我们上面指定了映射到本地的9528端口的</a>.</p>
<p>这个在我们开发微信公众号或者微博接口的时候,需要回调的时候特别有用.</p>
<p>我们看到,它还监听了本地的4040端口,来看一下是什么.<br><img src="/photo/ngrok/Ngrok4040.jpg" alt=""></p>
<h2 id="第二步：下载-微信web开发者工具"><a href="#第二步：下载-微信web开发者工具" class="headerlink" title="第二步：下载 微信web开发者工具"></a>第二步：下载 <a href="http://mp.weixin.qq.com/wiki/10/e5f772f4521da17fa0d7304f68b97d7e.html#.E4.B8.8B.E8.BD.BD.E5.9C.B0.E5.9D.80" target="_blank" rel="external">微信web开发者工具</a></h2><p><img src="/photo/ngrok/238DD01B-BBE8-4FEE-B1C0-8F33E62E9B57.png" alt="微信web开发者工具" title=" "></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/微信公众号/">微信公众号</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="photo-MacOs 安装Compass问题" class="article article-type-photo" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/03/MacOs 安装Compass问题/" class="article-date">
  	<time datetime="2016-03-02T18:27:52.000Z" itemprop="datePublished">2016-03-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/03/MacOs 安装Compass问题/">Mac Os安装Compass问题解决方案</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Mac-Os安装Compass问题解决方案"><a href="#Mac-Os安装Compass问题解决方案" class="headerlink" title="Mac Os安装Compass问题解决方案"></a>Mac Os安装Compass问题解决方案</h1><pre><code>$ gem install sass
ERROR:  While executing gem ... (Gem::FilePermissionError)
You don&apos;t have write permissions for the /Library/Ruby/Gems/2.0.0 directory.
</code></pre><h2 id="没有权限、以-sudo-方式-执行"><a href="#没有权限、以-sudo-方式-执行" class="headerlink" title="没有权限、以 sudo 方式 执行"></a>没有权限、以 sudo 方式 执行</h2><pre><code>$ sudo gem install compass
Building native extensions.  This could take a while...
ERROR:  Error installing compass:
    ERROR: Failed to build gem native extension.

    /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby -r ./siteconf20150924-435-e3lpzd.rb extconf.rb
checking for ffi.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of necessary
libraries and/or headers.  Check the mkmf.log file for more details.  You may
need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby
    --with-ffi_c-dir
    --without-ffi_c-dir
    --with-ffi_c-include
    --without-ffi_c-include=${ffi_c-dir}/include
    --with-ffi_c-lib
    --without-ffi_c-lib=${ffi_c-dir}/
    --with-libffi-config
    --without-libffi-config
    --with-pkg-config
    --without-pkg-config
/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:434:in `try_do&apos;: The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:549:in `block in try_compile&apos;
    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:502:in `with_werror&apos;
    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:549:in `try_compile&apos;
    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:1044:in `block in have_header&apos;
    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:895:in `block in checking_for&apos;
    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:340:in `block (2 levels) in postpone&apos;
    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:310:in `open&apos;
    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:340:in `block in postpone&apos;
    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:310:in `open&apos;
    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:336:in `postpone&apos;
    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:894:in `checking_for&apos;
    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:1043:in `have_header&apos;
    from extconf.rb:16:in `&lt;main&gt;&apos;

extconf failed, exit code 1

Gem files will remain installed in /Library/Ruby/Gems/2.0.0/gems/ffi-1.9.10 for inspection.
Results logged to /Library/Ruby/Gems/2.0.0/extensions/universal-darwin-14/2.0.0/ffi-1.9.10/gem_make.out
</code></pre><h2 id="解决方案：先执行-xcode-select-–install、再-sudo-gem-install-compass"><a href="#解决方案：先执行-xcode-select-–install、再-sudo-gem-install-compass" class="headerlink" title="解决方案：先执行 xcode-select –install、再 sudo gem install compass"></a>解决方案：先执行 xcode-select –install、再 sudo gem install compass</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mac-Os/">Mac Os</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="photo-HTTPS证书生成" class="article article-type-photo" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/12/HTTPS证书生成/" class="article-date">
  	<time datetime="2015-10-11T16:00:00.000Z" itemprop="datePublished">2015-10-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/12/HTTPS证书生成/">Openssl自签名证书的生成</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Openssl自签名证书的生成"><a href="#Openssl自签名证书的生成" class="headerlink" title="Openssl自签名证书的生成"></a>Openssl自签名证书的生成</h1><p>HTTPS中一个关键就是证书文件。当然我们可以找专业的第三方机构签发。自己玩玩的话就用自签名的证书就可以了，用户在访问的时候则需要确认安全性问题。<br>1、生成传输pre-master secret的时候所需要的Server端的私钥，运行时提示需要输入密码，用于对key的加密。以后每次读取此文件的时候，都需要输入指令。</p>
<pre><code># 生成服务器端的非对称秘钥
openssl genrsa -des3 -out server.key 1024

# 生成签名请求的CSR文件
openssl req -new -key server.key -out server.csr

# 自己对证书进行签名，签名的有效期是365天
openssl x509 -req -days 365 -in server.csr -signkey     server.key -out server.crt

# 去除证书文件的password
cp server.key server.key.orig
openssl rsa -in server.key.orig -out server.key
</code></pre><p>最终在建立HTTPS链接中使用的文件是</p>
<p>server.crt<br>server.key</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTPS/">HTTPS</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="photo-nodejs操作mongodb" class="article article-type-photo" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/06/nodejs操作mongodb/" class="article-date">
  	<time datetime="2015-10-05T19:40:01.000Z" itemprop="datePublished">2015-10-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/06/nodejs操作mongodb/">nodejs操作mongodb</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###首先安装nodejs mongodb</p>
<pre><code>npm install mongodb
</code></pre><p>###下面是代码部分：</p>
<pre><code>/**
 * Created by chenyuwu on 15/9/17.
 */
var mongo = require(&apos;mongodb&apos;);
var monk = require(&apos;monk&apos;);
var db = monk(&apos;localhost:27017/test&apos;);


module.exports = function(app){
    app.post(&apos;/test.do&apos;,function(req, res) {
        var $orderCode = req.body.orderCode;
        var $name = req.body.name;
        var $logisticCode = req.body.logisticCode;
        if ( &quot;&quot; == $name &amp;&amp; &quot;&quot; == $logisticCode) {
            return res.json({success:true});
        }
        var query_doc = {orderCode: $orderCode, name: $name, logisticCode: $logisticCode};
        console.log(&quot;test do ............&quot;+JSON.stringify(query_doc));
        var collection = db.get(&apos;usercollection&apos;);
        collection.find({},query_doc,function(e,docs){
            console.log(&quot;callback::::&quot;+JSON.stringify(e)+&quot;::::&quot;+JSON.stringify(docs))
            if(0 == docs.length){
                res.json({success:true});
            } else {
                res.json({success:false});
            }
        });
    });

    app.post(&apos;/addReturnOrder.do&apos;,function(req,res){
        var $orderCode = req.body.orderCode;
        var $name = req.body.name;
        var $logisticCode = req.body.logisticCode;
        if ( &quot;&quot; == $name &amp;&amp; &quot;&quot; == $logisticCode) {
            return res.json({success:true});
        }
        var insert_doc = {orderCode: $orderCode, name: $name, logisticCode: $logisticCode};
        var collection = db.get(&apos;usercollection&apos;);
        collection.insert(insert_doc,function(e,docs){
        console.log(&quot;insert_doc callback::::&quot;+JSON.stringify(e)+&quot;::::&quot;+JSON.stringify(docs))
        res.json({
            success:true
        });
    });
})
}
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MongoDB/">MongoDB</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-与Ionic的第一次接触" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/30/与Ionic的第一次接触/" class="article-date">
  	<time datetime="2015-07-30T09:12:36.000Z" itemprop="datePublished">2015-07-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/30/与Ionic的第一次接触/">与Ionic的第一次接触</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>使用Ionic时确保以下环境已经正确安装</p>
</blockquote>
<ul>
<li>nodejs</li>
<li>cordova<br>&nbsp;&nbsp;&nbsp;&nbsp;注意： 部分同学现在直接使用 npm install -g cordova 发现安装了以后 执行 cordova build<br>android 的时候 提示需要安装 platform for android-21 sdk ，意思就是需要 最新版本的 sdk<br>解决方法：</li>
</ul>
<ul>
<li>1、更新 sdk （推荐） 翻墙 代理 或者想其他办法</li>
<li>2、Sdk 没法更新的情况下面 可以先卸载当前的 cordova，然后再重新指定版本安装 cordova</li>
<li>3、下载 sdk 包集成 推荐 <a href="http://bbs.phonegap100.com/thread-1566-1-1.html" target="_blank" rel="external">http://bbs.phonegap100.com/thread-1566-1-1.html</a></li>
</ul>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://bbs.phonegap100.com/thread-1456-1-1.html" target="_blank" rel="external">Android adt 离线包集成 sdk</a><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://bbs.phonegap100.com/thread-1180-1-1.html" target="_blank" rel="external">卸载 cordova</a><br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://bbs.phonegap100.com/thread-1127-1-1.html" target="_blank" rel="external">重新指定版本 安装 cordova</a></p>
<pre><code>npm install -g cordova@4.1.2
</code></pre><h3 id="1、安装Ionic"><a href="#1、安装Ionic" class="headerlink" title="1、安装Ionic"></a><strong>1、安装Ionic</strong></h3><pre><code>npm install -g ionic
sudo npm install -g ionic
</code></pre><h3 id="2、创建运行项目"><a href="#2、创建运行项目" class="headerlink" title="2、创建运行项目"></a><strong>2、创建运行项目</strong></h3><p><strong>Ios 创建安装运行</strong></p>
<pre><code>ionic start myproject
cd myproject
ionic platform add ios
ionic build ios
ionic emulate ios
</code></pre><p><strong>Android 创建安装运行</strong></p>
<pre><code>ionic start myproject
cd myproject
ionic platform add android
ionic build android
ionic emulate android (模拟器运行)
ionic run android (连接上手机运行)
</code></pre><h3 id="3、安装完成后发现-android-环境下面导航在最上面解决方案"><a href="#3、安装完成后发现-android-环境下面导航在最上面解决方案" class="headerlink" title="3、安装完成后发现 android 环境下面导航在最上面解决方案"></a><strong>3、安装完成后发现 android 环境下面导航在最上面解决方案</strong></h3><p><strong>ionic 中默认安装后导航在底部解决方案</strong><br><strong>$ionicConfigProvider, ios and android</strong></p>
<p>在 iOS中, tabs 一直处于底部. 在android中 ionic tabs 一直在顶部,如果要改我们可以通过配置$ionicConfigProvider</p>
<pre><code>.config(function($stateProvider, $urlRouterProvider,$ionicConfigProvider) {

        $ionicConfigProvider.platform.ios.tabs.style(&apos;standard&apos;);
        $ionicConfigProvider.platform.ios.tabs.position(&apos;bottom&apos;);
        $ionicConfigProvider.platform.android.tabs.style(&apos;standard&apos;);
        $ionicConfigProvider.platform.android.tabs.position(&apos;standard&apos;);

        $ionicConfigProvider.platform.ios.navBar.alignTitle(&apos;center&apos;);
        $ionicConfigProvider.platform.android.navBar.alignTitle(&apos;left&apos;);

        $ionicConfigProvider.platform.ios.backButton.previousTitleText(&apos;&apos;).icon(&apos;ion-ios-arrow-thin-left&apos;);
        $ionicConfigProvider.platform.android.backButton.previousTitleText(&apos;&apos;).icon(&apos;ion-android-arrow-back&apos;);

        $ionicConfigProvider.platform.ios.views.transition(&apos;ios&apos;);
        $ionicConfigProvider.platform.android.views.transition(&apos;android&apos;);


  // Ionic uses AngularUI Router which uses the concept of states
  // Learn more here: https://github.com/angular-ui/ui-router
  // Set up the various states which the app can be in.
  // Each state&apos;s controller can be found in controllers.js
  $stateProvider

  // setup an abstract state for the tabs directive
    .state(&apos;tab&apos;, {
    url: &quot;/tab&quot;,
    abstract: true,
    templateUrl: &quot;templates/tabs.html&quot;
  })

  // Each tab has its own nav history stack:

  .state(&apos;tab.dash&apos;, {
    url: &apos;/dash&apos;,
    views: {
      &apos;tab-dash&apos;: {
        templateUrl: &apos;templates/tab-dash.html&apos;,
        controller: &apos;DashCtrl&apos;
      }
    }
  })

  .state(&apos;tab.chats&apos;, {
      url: &apos;/chats&apos;,
      views: {
        &apos;tab-chats&apos;: {
          templateUrl: &apos;templates/tab-chats.html&apos;,
          controller: &apos;ChatsCtrl&apos;
        }
      }
    })
    .state(&apos;tab.chat-detail&apos;, {
      url: &apos;/chats/:chatId&apos;,
      views: {
        &apos;tab-chats&apos;: {
          templateUrl: &apos;templates/chat-detail.html&apos;,
          controller: &apos;ChatDetailCtrl&apos;
        }
      }
    })

  .state(&apos;tab.account&apos;, {
    url: &apos;/account&apos;,
    views: {
      &apos;tab-account&apos;: {
        templateUrl: &apos;templates/tab-account.html&apos;,
        controller: &apos;AccountCtrl&apos;
      }
    }
  });

  // if none of the above states are matched, use this as the fallback
  $urlRouterProvider.otherwise(&apos;/tab/dash&apos;);

});
</code></pre><h3 id="4、在浏览器上调试Ionic"><a href="#4、在浏览器上调试Ionic" class="headerlink" title="4、在浏览器上调试Ionic"></a><strong>4、在浏览器上调试Ionic</strong></h3><pre><code>ionic serve
cordova serve
</code></pre><h3 id="5、Ionic-中集成-Crosswalk-（也可以集成其他的-htnl5-框架-如-jqmobi）-介绍："><a href="#5、Ionic-中集成-Crosswalk-（也可以集成其他的-htnl5-框架-如-jqmobi）-介绍：" class="headerlink" title="5、Ionic 中集成 Crosswalk  （也可以集成其他的 htnl5 框架 如 jqmobi） 介绍："></a><strong>5、Ionic 中集成 Crosswalk  （也可以集成其他的 htnl5 框架 如 jqmobi） 介绍：</strong></h3><p>  <strong>1. Crosswalk 介绍：</strong><br>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Crosswalk 作为一款开源的 web 引擎，正是为了跨越这些障碍而生。目前 Crosswalk 正式支持的移动操作系统包括 Android 和 Tizen，在 Android 4.0 及以上的系统中使用 Crosswalk 的Web 应用程序在 HTML5 方面可以有一致的体验，同时和系统的整合交互方面（比如启动画面、权限管理、应用切换、社交分享等等）可以做到类似原生应用。 现在 Crosswalk 已经成为众多知名 HTML5 平台和应用的推荐引擎， 包括 Google Mobile Chrome App、 Intel XDK、Famo.us 和 Construct2 等等， 未来的 Cordova 4.X 也计划集成 Crosswalk。同时在去年的中国iWeb 大会上， Cocos2d-HTML5 游戏引擎也宣布与 Crosswalk 展开合作。</p>
<p>  <strong>2．使用 Crosswalk 的优点和缺点</strong><br>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;优点： 运行速度提升<br>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;缺点：安装包比较大</p>
<p>  <strong>3．集成 crosswalk</strong></p>
<pre><code>ionic browser add crosswalk
</code></pre><p>  <strong>4.卸载 crosswalk</strong></p>
<pre><code>ionic browser revert android
</code></pre><p>  或者</p>
<pre><code>ionic browser remove crosswalk
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hybrid/">Hybrid</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Dean
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>