<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>wcy 的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="wcy 的博客">
<meta property="og:url" content="http://wcy.me/index.html">
<meta property="og:site_name" content="wcy 的博客">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="wcy 的博客">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="wcy 的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://avatars1.githubusercontent.com/u/9653758?v=3&amp;s=460" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Dean</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>Über</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/TheCrookedMan/thecrookedman.github.com/tree/master" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/CSS/" style="font-size: 12.5px;">CSS</a> <a href="/tags/Chrome/" style="font-size: 10px;">Chrome</a> <a href="/tags/Cross-domain/" style="font-size: 10px;">Cross-domain</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/HTML5/" style="font-size: 20px;">HTML5</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Hybrid/" style="font-size: 10px;">Hybrid</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Linux/" style="font-size: 17.5px;">Linux</a> <a href="/tags/Mac-Os/" style="font-size: 10px;">Mac Os</a> <a href="/tags/MongoDB/" style="font-size: 12.5px;">MongoDB</a> <a href="/tags/SVN/" style="font-size: 15px;">SVN</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/react-native/" style="font-size: 10px;">react-native</a> <a href="/tags/shell/" style="font-size: 12.5px;">shell</a> <a href="/tags/web-移动端/" style="font-size: 10px;">web 移动端</a> <a href="/tags/前端优化/" style="font-size: 10px;">前端优化</a> <a href="/tags/前端框架原理/" style="font-size: 10px;">前端框架原理</a> <a href="/tags/前端编码规范/" style="font-size: 15px;">前端编码规范</a> <a href="/tags/微信公众号/" style="font-size: 10px;">微信公众号</a> <a href="/tags/页面模板/" style="font-size: 10px;">页面模板</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Dean</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="https://avatars1.githubusercontent.com/u/9653758?v=3&amp;s=460" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Dean</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/TheCrookedMan/thecrookedman.github.com/tree/master" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="photo-编码规范/前端开发编码规范（二）" class="article article-type-photo" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/15/编码规范/前端开发编码规范（二）/" class="article-date">
  	<time datetime="2016-10-15T08:57:23.000Z" itemprop="datePublished">2016-10-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/15/编码规范/前端开发编码规范（二）/">前端编码规范（二）</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="HTML规范"><a href="#HTML规范" class="headerlink" title="HTML规范"></a>HTML规范</h1><p>转载自：<a href="http://www.css88.com/archives/5364" target="_blank" rel="external">前端编码规范（2）—— HTML 规范</a></p>
<h2 id="文档类型"><a href="#文档类型" class="headerlink" title="文档类型"></a>文档类型</h2><p>推荐使用 HTML5 的文档类型申明： &lt;!DOCTYPE html&gt;.</p>
<p>（建议使用 text/html 格式的 HTML。避免使用 XHTML。XHTML 以及它的属性，比如 application/xhtml+xml 在浏览器中的应用支持与优化空间都十分有限）。</p>
<p>HTML 中最好不要将无内容元素[1] 的标签闭合，例如：使用 <br> 而非 <br>.</p>
<hr>
<h2 id="HTML-验证"><a href="#HTML-验证" class="headerlink" title="HTML 验证"></a>HTML 验证</h2><p>一般情况下，建议使用能通过标准规范验证的 HTML 代码，除非在性能优化和控制文件大小上不得不做出让步。</p>
<p>使用诸如 W3C HTML validator 这样的工具来进行检测。</p>
<p>规范化的 HTML 是显现技术要求与局限的显著质量基线，它促进了 HTML 被更好地运用。</p>
<h4 id="不推荐"><a href="#不推荐" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>&lt;title&gt;Test&lt;/title&gt;
&lt;article&gt;This is only a test.
</code></pre><h4 id="推荐"><a href="#推荐" class="headerlink" title="推荐"></a>推荐</h4><pre><code>&lt;!DOCTYPE html&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;Test&lt;/title&gt;
&lt;article&gt;This is only a test.&lt;/article&gt;
</code></pre><h4 id="省略可选标签"><a href="#省略可选标签" class="headerlink" title="省略可选标签"></a>省略可选标签</h4><p>HTML5 规范中规定了 HTML 标签是可以省略的。但从可读性来说，在开发的源文件中最好不要这样做，因为省略标签可能会导致一些问题。</p>
<p>省略一些可选的标签确实使得页面大小减少，这很有用，尤其是对于一些大型网站来说。为了达到这一目的，我们可以在开发后期对页面进行压缩处理，在这个环节中这些可选的标签完全就可以省略掉了。</p>
<hr>
<h4 id="脚本加载"><a href="#脚本加载" class="headerlink" title="脚本加载"></a>脚本加载</h4><p>出于性能考虑，脚本异步加载很关键。一段脚本放置在 <head> 内，比如 <code>&lt;script src=&quot;main.js&quot;&gt;&lt;/script&gt;</code>，其加载会一直阻塞 DOM 解析，直至它完全地加载和执行完毕。这会造成页面显示的延迟。特别是一些重量级的脚本，对用户体验来说那真是一个巨大的影响。</head></p>
<p>异步加载脚本可缓解这种性能影响。如果只需兼容 IE10+，可将 HTML5 的 async 属性加至脚本中，它可防止阻塞 DOM 的解析，甚至你可以将脚本引用写在 <head> 里也没有影响。</head></p>
<p>如需兼容老旧的浏览器，实践表明可使用用来动态注入脚本的脚本加载器。你可以考虑 <a href="http://yepnopejs.com/" target="_blank" rel="external">yepnope</a> 或 <a href="http://labjs.com/" target="_blank" rel="external">labjs</a>。注入脚本的一个问题是：<a href="https://www.igvita.com/2014/05/20/script-injected-async-scripts-considered-harmful/" target="_blank" rel="external">一直要等到 CSS 对象文档已就绪，它们才开始加载</a>（短暂地在 CSS 加载完毕之后），这就对需要及时触发的 JS 造成了一定的延迟，这多多少少也影响了用户体验吧。</p>
<p>终上所述，兼容老旧浏览器(IE9-)时，应该遵循以下最佳实践。</p>
<p>脚本引用写在 body 结束标签之前，并带上 async 属性。这虽然在老旧浏览器中不会异步加载脚本，但它只阻塞了 body 结束标签之前的 DOM 解析，这就大大降低了其阻塞影响。而在现代浏览器中，脚本将在 DOM 解析器发现 body 尾部的 script 标签才进行加载，此时加载属于异步加载，不会阻塞 CSSOM（但其执行仍发生在 CSSOM 之后）。</p>
<h4 id="所有浏览器中，推荐"><a href="#所有浏览器中，推荐" class="headerlink" title="所有浏览器中，推荐"></a>所有浏览器中，推荐</h4><pre><code>&lt;html&gt;
  &lt;head&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;main.css&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;!-- body goes here --&gt;

    &lt;script src=&quot;main.js&quot; async&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre><h4 id="只在现代浏览器中，推荐"><a href="#只在现代浏览器中，推荐" class="headerlink" title="只在现代浏览器中，推荐"></a>只在现代浏览器中，推荐</h4><pre><code>&lt;html&gt;
  &lt;head&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;main.css&quot;&gt;
    &lt;script src=&quot;main.js&quot; async&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;!-- body goes here --&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre><h2 id="语义化"><a href="#语义化" class="headerlink" title="语义化"></a>语义化</h2><p>根据元素（有时被错误地称作“标签”）其被创造出来时的初始意义来使用它。打个比方，用 heading 元素来定义头部标题，p 元素来定义文字段落，用 a 元素来定义链接锚点，等等。</p>
<p>有根据有目的地使用 HTML 元素，对于可访问性、代码重用、代码效率来说意义重大。</p>
<p>以下示例列出了一些的语义化 HTML 主要情况：</p>
<h4 id="不推荐-1"><a href="#不推荐-1" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>&lt;b&gt;My page title&lt;/b&gt;
&lt;div class=&quot;top-navigation&quot;&gt;
  &lt;div class=&quot;nav-item&quot;&gt;&lt;a href=&quot;#home&quot;&gt;Home&lt;/a&gt;&lt;/div&gt;
  &lt;div class=&quot;nav-item&quot;&gt;&lt;a href=&quot;#news&quot;&gt;News&lt;/a&gt;&lt;/div&gt;
  &lt;div class=&quot;nav-item&quot;&gt;&lt;a href=&quot;#about&quot;&gt;About&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;news-page&quot;&gt;
  &lt;div class=&quot;page-section news&quot;&gt;
    &lt;div class=&quot;title&quot;&gt;All news articles&lt;/div&gt;
    &lt;div class=&quot;news-article&quot;&gt;
      &lt;h2&gt;Bad article&lt;/h2&gt;
      &lt;div class=&quot;intro&quot;&gt;Introduction sub-title&lt;/div&gt;
      &lt;div class=&quot;content&quot;&gt;This is a very bad example for HTML semantics&lt;/div&gt;
      &lt;div class=&quot;article-side-notes&quot;&gt;I think I&apos;m more on the side and should not receive the main credits&lt;/div&gt;
      &lt;div class=&quot;article-foot-notes&quot;&gt;
        This article was created by David &lt;div class=&quot;time&quot;&gt;2014-01-01 00:00&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;div class=&quot;section-footer&quot;&gt;
      Related sections: Events, Public holidays
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;page-footer&quot;&gt;
  Copyright 2014
&lt;/div&gt;
</code></pre><h4 id="推荐-1"><a href="#推荐-1" class="headerlink" title="推荐"></a>推荐</h4><pre><code>&lt;!-- The page header should go into a header element --&gt;
&lt;header&gt;
  &lt;!-- As this title belongs to the page structure it&apos;s a heading and h1 should be used --&gt;
  &lt;h1&gt;My page title&lt;/h1&gt;
&lt;/header&gt;

&lt;!-- All navigation should go into a nav element --&gt;
&lt;nav class=&quot;top-navigation&quot;&gt;
  &lt;!-- A listing of elements should always go to UL (OL for ordered listings) --&gt;
  &lt;ul&gt;
    &lt;li class=&quot;nav-item&quot;&gt;&lt;a href=&quot;#home&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
    &lt;li class=&quot;nav-item&quot;&gt;&lt;a href=&quot;#news&quot;&gt;News&lt;/a&gt;&lt;/li&gt;
    &lt;li class=&quot;nav-item&quot;&gt;&lt;a href=&quot;#about&quot;&gt;About&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;

&lt;!-- The main part of the page should go into a main element (also use role=&quot;main&quot; for accessibility) --&gt;
&lt;main class=&quot;news-page&quot; role=&quot;main&quot;&gt;
  &lt;!-- A section of a page should go into a section element. Divide a page into sections with semantic elements. --&gt;
  &lt;section class=&quot;page-section news&quot;&gt;
    &lt;!-- A section header should go into a section element --&gt;
    &lt;header&gt;
      &lt;!-- As a page section belongs to the page structure heading elements should be used (in this case h2) --&gt;
      &lt;h2 class=&quot;title&quot;&gt;All news articles&lt;/h2&gt;
    &lt;/header&gt;

    &lt;!-- If a section / module can be seen as an article (news article, blog entry, products teaser, any other
     re-usable module / section that can occur multiple times on a page) a article element should be used --&gt;
    &lt;article class=&quot;news-article&quot;&gt;
      &lt;!-- An article can contain a header that contains the summary / introduction information of the article --&gt;
      &lt;header&gt;
        &lt;!-- As a article title does not belong to the overall page structure there should not be any heading tag! --&gt;
        &lt;div class=&quot;article-title&quot;&gt;Good article&lt;/div&gt;
        &lt;!-- Small can optionally be used to reduce importance --&gt;
        &lt;small class=&quot;intro&quot;&gt;Introduction sub-title&lt;/small&gt;
      &lt;/header&gt;

      &lt;!-- For the main content in a section or article there is no semantic element --&gt;
      &lt;div class=&quot;content&quot;&gt;
        &lt;p&gt;This is a good example for HTML semantics&lt;/p&gt;
      &lt;/div&gt;
      &lt;!-- For content that is represented as side note or less important information in a given context use aside --&gt;
      &lt;aside class=&quot;article-side-notes&quot;&gt;
        &lt;p&gt;I think I&apos;m more on the side and should not receive the main credits&lt;/p&gt;
      &lt;/aside&gt;
      &lt;!-- Articles can also contain footers. If you have footnotes for an article place them into a footer element --&gt;
      &lt;footer class=&quot;article-foot-notes&quot;&gt;
        &lt;!-- The time element can be used to annotate a timestamp. Use the datetime attribute to specify ISO time
         while the actual text in the time element can also be more human readable / relative --&gt;
        &lt;p&gt;This article was created by David &lt;time datetime=&quot;2014-01-01 00:00&quot; class=&quot;time&quot;&gt;1 month ago&lt;/time&gt;&lt;/p&gt;
      &lt;/footer&gt;
    &lt;/article&gt;

    &lt;!-- In a section, footnotes or similar information can also go into a footer element --&gt;
    &lt;footer class=&quot;section-footer&quot;&gt;
      &lt;p&gt;Related sections: Events, Public holidays&lt;/p&gt;
    &lt;/footer&gt;
  &lt;/section&gt;
&lt;/main&gt;

&lt;!-- Your page footer should go into a global footer element --&gt;
&lt;footer class=&quot;page-footer&quot;&gt;
  Copyright 2014
&lt;/footer&gt;
</code></pre><h2 id="多媒体回朔"><a href="#多媒体回朔" class="headerlink" title="多媒体回朔"></a>多媒体回朔</h2><p>对页面上的媒体而言，像图片、视频、canvas 动画等，要确保其有可替代的接入接口。图片文件我们可采用有意义的备选文本（alt），视频和音频文件我们可以为其加上说明文字或字幕。</p>
<p>提供可替代内容对可用性来说十分重要。试想，一位盲人用户如何能知晓一张图片是什么，要是没有 @alt 的话。</p>
<p>（图片的 alt 属性是可不填写内容的，纯装饰性的图片就可用这么做：alt=””）。</p>
<h4 id="不推荐-2"><a href="#不推荐-2" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>&lt;img src=&quot;luke-skywalker.jpg&quot;&gt;
</code></pre><h4 id="推荐-2"><a href="#推荐-2" class="headerlink" title="推荐"></a>推荐</h4><pre><code>&lt;img src=&quot;luke-skywalker.jpg&quot; alt=&quot;Luke skywalker riding an alien horse&quot;&gt;
</code></pre><p>尽量用 alt 标签去描述图片，设想你需要对于那些只能通过语音或者看不见图片的用户表达图片到底是什么。</p>
<h4 id="不推荐-3"><a href="#不推荐-3" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>&lt;img src=&quot;huge-spaceship-approaching-earth.jpg&quot; alt=&quot;Header image&quot;&gt;
</code></pre><h4 id="推荐-3"><a href="#推荐-3" class="headerlink" title="推荐"></a>推荐</h4><pre><code>&lt;img src=&quot;huge-spaceship-approaching-earth.jpg&quot; alt=&quot;A huge spaceship that is approaching the earth&quot;&gt;
</code></pre><h2 id="关注点分离"><a href="#关注点分离" class="headerlink" title="关注点分离"></a>关注点分离</h2><p>理解 web 中如何和为何区分不同的关注点，这很重要。这里的关注点主要指的是：信息（HTML 结构）、外观（CSS）和行为（JavaScript）。为了使它们成为可维护的干净整洁的代码，我们要尽可能的将它们分离开来。</p>
<p>严格地保证结构、表现、行为三者分离，并尽量使三者之间没有太多的交互和联系。</p>
<p>就是说，尽量在文档和模板中只包含结构性的 HTML；而将所有表现代码，移入样式表中；将所有动作行为，移入脚本之中。</p>
<p>在此之外，为使得它们之间的联系尽可能的小，在文档和模板中也尽量少地引入样式和脚本文件。</p>
<p>清晰的分层意味着：</p>
<ul>
<li>不使用超过一到两张样式表（i.e. main.css, vendor.css）</li>
<li>不使用超过一到两个脚本（学会用合并脚本）</li>
<li>不使用行内样式<code>（&lt;style&gt;.no-good {}&lt;/style&gt;）</code></li>
<li>不在元素上使用 <code>style 属性（&lt;hr style=&quot;border-top: 5px solid black&quot;&gt;）</code></li>
<li>不使用行内脚本 <code>（&lt;script&gt;alert(&#39;no good&#39;)&lt;/script&gt;）</code></li>
<li>不使用表象元素 <code>（i.e. &lt;b&gt;, &lt;u&gt;, &lt;center&gt;, &lt;font&gt;, &lt;b&gt;）</code></li>
<li>不使用表象 <code>class 名（i.e. red, left, center）</code></li>
</ul>
<h4 id="不推荐-4"><a href="#不推荐-4" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;base.css&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;grid.css&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;type.css&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;modules/teaser.css&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1 style=&quot;font-size: 3rem&quot;&gt;&lt;/h1&gt;
  &lt;b&gt;I&apos;m a subtitle and I&apos;m bold!&lt;/b&gt;
  &lt;center&gt;Dare you center me!&lt;/center&gt;
  &lt;script&gt;
    alert(&apos;Just dont...&apos;);
  &lt;/script&gt;
  &lt;div class=&quot;red&quot;&gt;I&apos;m important!&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><h4 id="推荐-4"><a href="#推荐-4" class="headerlink" title="推荐"></a>推荐</h4><pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;!-- Concatinate your style sheets into a single one --&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;main.css&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;!-- Don&apos;t use style attributes but assign sensible classes and apply styles in the stylesheet --&gt;
  &lt;h1 class=&quot;title&quot;&gt;&lt;/h1&gt;
  &lt;!-- Don&apos;t use presentational elements and assign sensible classes --&gt;
  &lt;div class=&quot;sub-title&quot;&gt;I&apos;m a subtitle and I&apos;m bold!&lt;/div&gt;
  &lt;!-- Maybe your comments get centered in your presentation but that decision is up to the stylesheet --&gt;
  &lt;span class=&quot;comment&quot;&gt;Dare you center me!&lt;/span&gt;
  &lt;!-- You wanted to make it red because it&apos;s important so then also name the class important and decide in the stylesheet
   what you want to do with it --&gt;
  &lt;div class=&quot;important&quot;&gt;I&apos;m important!&lt;/div&gt;

  &lt;!-- Put all your scripts into files and concatinate them into a single one --&gt;
  &lt;script async src=&quot;main.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><h2 id="HTML-内容至上"><a href="#HTML-内容至上" class="headerlink" title="HTML 内容至上"></a>HTML 内容至上</h2><p>不要让非内容信息污染了你的 HTML。现在貌似有一种倾向：通过 HTML 来解决设计问题，这是显然是不对的。HTML 就应该只关注内容。</p>
<p>HTML 标签的目的，就是为了不断地展示内容信息。</p>
<ul>
<li>不要引入一些特定的 HTML 结构来解决一些视觉设计问题</li>
<li>不要将 img 元素当做专门用来做视觉设计的元素</li>
</ul>
<p>以下例子展示了误将 HTML 用来解决设计问题的这两种情况：</p>
<h4 id="不推荐-5"><a href="#不推荐-5" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>&lt;!-- We should not introduce an additional element just to solve a design problem  --&gt;
&lt;span class=&quot;text-box&quot;&gt;
  &lt;span class=&quot;square&quot;&gt;&lt;/span&gt;
  See the square next to me?
&lt;/span&gt;


.text-box &gt; .square {
  display: inline-block;
  width: 1rem;
  height: 1rem;
  background-color: red;
}
</code></pre><h4 id="推荐-5"><a href="#推荐-5" class="headerlink" title="推荐"></a>推荐</h4><pre><code>&lt;!-- That&apos;s clean markup! --&gt;
&lt;span class=&quot;text-box&quot;&gt;
  See the square next to me?
&lt;/span&gt;


/* We use a :before pseudo element to solve the design problem of placing a colored square in front of the text content */
.text-box:before {
  content: &quot;&quot;;
  display: inline-block;
  width: 1rem;
  height: 1rem;
  background-color: red;
}
</code></pre><p>图片和 SVG 图形能被引入到 HTML 中的唯一理由是它们呈现出了与内容相关的一些信息。</p>
<h4 id="不推荐-6"><a href="#不推荐-6" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>&lt;!-- Content images should never be used for design elements!  --&gt;
&lt;span class=&quot;text-box&quot;&gt;
  &lt;img src=&quot;square.svg&quot; alt=&quot;Square&quot; /&gt;
  See the square next to me?
&lt;/span&gt;
</code></pre><h4 id="推荐-6"><a href="#推荐-6" class="headerlink" title="推荐"></a>推荐</h4><pre><code>&lt;!-- That&apos;s clean markup! --&gt;
&lt;span class=&quot;text-box&quot;&gt;
  See the square next to me?
&lt;/span&gt;

/* We use a :before pseudo element with a background image to solve the problem */
.text-box:before {
  content: &quot;&quot;;
  display: inline-block;
  width: 1rem;
  height: 1rem;
  background: url(square.svg) no-repeat;
  background-size: 100%;
}
</code></pre><h2 id="Type-属性"><a href="#Type-属性" class="headerlink" title="Type 属性"></a>Type 属性</h2><p>省略样式表与脚本上的 type 属性。鉴于 HTML5 中以上两者默认的 type 值就是 text/css 和 text/javascript，所以 type 属性一般是可以忽略掉的。甚至在老旧版本的浏览器中这么做也是安全可靠的。</p>
<h4 id="不推荐-7"><a href="#不推荐-7" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;main.css&quot; type=&quot;text/css&quot;&gt;
&lt;script src=&quot;main.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
</code></pre><h4 id="推荐-7"><a href="#推荐-7" class="headerlink" title="推荐"></a>推荐</h4><pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;main.css&quot;&gt;
&lt;script src=&quot;main.js&quot;&gt;&lt;/script&gt;
</code></pre><h2 id="可用性"><a href="#可用性" class="headerlink" title="可用性"></a>可用性</h2><p>如果 HTML5 语义化标签使用得当，许多可用性问题已经引刃而解。ARIA 规则在一些语义化的元素上可为其添上默认的可用性角色属性，使用得当的话已使网站的可用性大部分成立。假如你使用 <code>nav</code>, <code>aside</code>, <code>main</code>, <code>footer</code> 等元素，ARIA 规则会在其上应用一些关联的默认值。<br>更多细节可参考 <a href="">ARIA specification</a></p>
<p>另外一些角色属性则能够用来呈现更多可用性情景（i.e. role=”tab”）。</p>
<h2 id="Tab-Index-在可用性上的运用"><a href="#Tab-Index-在可用性上的运用" class="headerlink" title="Tab Index 在可用性上的运用"></a>Tab Index 在可用性上的运用</h2><p>检查文档中的 tab 切换顺序并传值给元素上的 tabindex，这可以依据元素的重要性来重新排列其 tab 切换顺序。你可以设置 <code>tabindex=&quot;-1&quot;</code> 在任何元素上来禁用其 tab 切换。</p>
<p>当你在一个默认不可聚焦的元素上增加了功能，你应该总是为其加上 <code>tabindex</code> 属性使其变为可聚焦状态，而且这也会激活其 CSS 的伪类 :focus。选择合适的 <code>tabindex</code> 值，或是直接使用 <code>tabindex=&quot;0&quot;</code> 将元素们组织成同一 tab 顺序水平，并强制干预其自然阅读顺序。</p>
<h2 id="微格式在-SEO-和可用性上的运用"><a href="#微格式在-SEO-和可用性上的运用" class="headerlink" title="微格式在 SEO 和可用性上的运用"></a>微格式在 SEO 和可用性上的运用</h2><p>如果 SEO 和可用性环境条件允许的话，建议考虑采用微格式。微格式是通过在元素标签上申明一系列特定数据来达成特定语义的方法。</p>
<p>谷歌、微软和雅虎对如何使用这些额外的数据一定程度上的达成一致，如果正确的使用，这将给搜索引擎优化带来巨大的好处。</p>
<p>你可以访问 <a href="http://schema.org/" target="_blank" rel="external">schema.org</a> 获得更多内容细节。</p>
<p>看一个电影网站的简单例子：</p>
<h4 id="不带微格式"><a href="#不带微格式" class="headerlink" title="不带微格式"></a>不带微格式</h4><pre><code>&lt;div&gt;
 &lt;h1&gt;Avatar&lt;/h1&gt;
 &lt;span&gt;Director: James Cameron (born August 16, 1954)&lt;/span&gt;
 &lt;span&gt;Science fiction&lt;/span&gt;
 &lt;a href=&quot;../movies/avatar-theatrical-trailer.html&quot;&gt;Trailer&lt;/a&gt;
&lt;/div&gt;
</code></pre><h4 id="带微格式"><a href="#带微格式" class="headerlink" title="带微格式"></a>带微格式</h4><pre><code>&lt;div itemscope itemtype =&quot;http://schema.org/Movie&quot;&gt;
  &lt;h1 itemprop=&quot;name&quot;&gt;Avatar&lt;/h1&gt;
  &lt;div itemprop=&quot;director&quot; itemscope itemtype=&quot;http://schema.org/Person&quot;&gt;
  Director: &lt;span itemprop=&quot;name&quot;&gt;James Cameron&lt;/span&gt; (born &lt;span itemprop=&quot;birthDate&quot;&gt;August 16, 1954)&lt;/span&gt;
  &lt;/div&gt;
  &lt;span itemprop=&quot;genre&quot;&gt;Science fiction&lt;/span&gt;
  &lt;a href=&quot;../movies/avatar-theatrical-trailer.html&quot; itemprop=&quot;trailer&quot;&gt;Trailer&lt;/a&gt;
&lt;/div&gt;
</code></pre><h2 id="ID-和锚点"><a href="#ID-和锚点" class="headerlink" title="ID 和锚点"></a>ID 和锚点</h2><p>通常一个比较好的做法是将页面内所有的头部标题元素都加上 ID. 这样做，页面 URL 的 hash 中带上对应的 ID 名称，即形成描点，方便跳转至对应元素所处位置。</p>
<p>打个比方，当你在浏览器中输入 URL <a href="http://your-site.com/about#best-practices，浏览器将定位至以下" target="_blank" rel="external">http://your-site.com/about#best-practices，浏览器将定位至以下</a> H3 上。</p>
<pre><code>&lt;h3 id=&quot;best-practices&quot;&gt;Best practices&lt;/h3&gt;
</code></pre><h2 id="格式化规则"><a href="#格式化规则" class="headerlink" title="格式化规则"></a>格式化规则</h2><p>在每一个块状元素，列表元素和表格元素后，加上一新空白行，并对其子孙元素进行缩进。内联元素写在一行内，块状元素还有列表和表格要另起一行。</p>
<p>（如果由于换行的空格引发了不可预计的问题，那将所有元素并入一行也是可以接受的，格式警告总好过错误警告）。</p>
<p>推荐</p>
<pre><code>&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Space&lt;/em&gt;, the final frontier.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;Moe&lt;/li&gt;
  &lt;li&gt;Larry&lt;/li&gt;
  &lt;li&gt;Curly&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th scope=&quot;col&quot;&gt;Income&lt;/th&gt;
      &lt;th scope=&quot;col&quot;&gt;Taxes&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;$ 5.00&lt;/td&gt;
      &lt;td&gt;$ 4.50&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</code></pre><h2 id="HTML-引号"><a href="#HTML-引号" class="headerlink" title="HTML 引号"></a>HTML 引号</h2><p>使用双引号(“”) 而不是单引号(”) 。</p>
<h4 id="不推荐-8"><a href="#不推荐-8" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>&lt;div class=&apos;news-article&apos;&gt;&lt;/div&gt;
</code></pre><h4 id="推荐-8"><a href="#推荐-8" class="headerlink" title="推荐"></a>推荐</h4><pre><code>&lt;div class=&quot;news-article&quot;&gt;&lt;/div&gt;
</code></pre><p>此处的空白元素指的是以下元素：<code>area</code>, <code>base</code>, <code>br</code>, <code>col</code>, <code>command</code>, <code>embed</code>, <code>hr</code>, <code>img</code>, <code>input</code>, <code>keygen</code>, <code>link</code>, <code>meta</code>, <code>param</code>, <code>source</code>, <code>track</code>, <code>wbr</code>.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端编码规范/">前端编码规范</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="photo-编码规范/前端编码规范（三）" class="article article-type-photo" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/15/编码规范/前端编码规范（三）/" class="article-date">
  	<time datetime="2016-10-15T08:57:23.000Z" itemprop="datePublished">2016-10-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/15/编码规范/前端编码规范（三）/">前端编码规范（三）</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="JavaScript-规范"><a href="#JavaScript-规范" class="headerlink" title="JavaScript 规范"></a>JavaScript 规范</h1><p>转载自：<a href="http://www.css88.com/archives/5366" target="_blank" rel="external">前端编码风格规范（3）—— JavaScript 规范</a></p>
<h3 id="全局命名空间污染与-IIFE"><a href="#全局命名空间污染与-IIFE" class="headerlink" title="全局命名空间污染与 IIFE"></a>全局命名空间污染与 IIFE</h3><p>总是将代码包裹成一个 IIFE(Immediately-Invoked Function Expression)，用以创建独立隔绝的定义域。这一举措可防止全局命名空间被污染。</p>
<p>IIFE 还可确保你的代码不会轻易被其它全局命名空间里的代码所修改（i.e. 第三方库，window 引用，被覆盖的未定义的关键字等等）。</p>
<h4 id="不推荐"><a href="#不推荐" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>var x = 10,
    y = 100;

// Declaring variables in the global scope is resulting in global scope pollution. All variables declared like this
// will be stored in the window object. This is very unclean and needs to be avoided.
console.log(window.x + &apos; &apos; + window.y);
</code></pre><h4 id="推荐"><a href="#推荐" class="headerlink" title="推荐"></a>推荐</h4><pre><code>// We declare a IIFE and pass parameters into the function that we will use from the global space
(function(log, w, undefined){
  &apos;use strict&apos;;

  var x = 10,
      y = 100;

  // Will output &apos;true true&apos;
  log((w.x === undefined) + &apos; &apos; + (w.y === undefined));

}(window.console.log, window));
</code></pre><h3 id="IIFE（立即执行的函数表达式）"><a href="#IIFE（立即执行的函数表达式）" class="headerlink" title="IIFE（立即执行的函数表达式）"></a>IIFE（立即执行的函数表达式）</h3><p>无论何时，想要创建一个新的封闭的定义域，那就用 IIFE。它不仅避免了干扰，也使得内存在执行完后立即释放。</p>
<p>所有脚本文件建议都从 IIFE 开始。</p>
<p>立即执行的函数表达式的执行括号应该写在外包括号内。虽然写在内还是写在外都是有效的，但写在内使得整个表达式看起来更像一个整体，因此推荐这么做。</p>
<h4 id="不推荐-1"><a href="#不推荐-1" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>(function(){})();
</code></pre><h4 id="推荐-1"><a href="#推荐-1" class="headerlink" title="推荐"></a>推荐</h4><pre><code>(function(){}());
</code></pre><p>so，用下列写法来格式化你的 IIFE 代码：</p>
<pre><code>(function(){
  &apos;use strict&apos;;

  // Code goes here

}());
</code></pre><p>如果你想引用全局变量或者是外层 IIFE 的变量，可以通过下列方式传参：</p>
<pre><code>(function($, w, d){
  &apos;use strict&apos;;

  $(function() {
    w.alert(d.querySelectorAll(&apos;div&apos;).length);
  });
}(jQuery, window, document));
</code></pre><h2 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h2><p>ECMAScript 5 严格模式可在整个脚本或独个方法内被激活。它对应不同的 javascript 语境会做更加严格的错误检查。严格模式也确保了 javascript 代码更加的健壮，运行的也更加快速。</p>
<p>严格模式会阻止使用在未来很可能被引入的预留关键字。</p>
<p>你应该在你的脚本中启用严格模式，最好是在独立的 IIFE 中应用它。避免在你的脚本第一行使用它而导致你的所有脚本都启动了严格模式，这有可能会引发一些第三方类库的问题。</p>
<h4 id="不推荐-2"><a href="#不推荐-2" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>// Script starts here
&apos;use strict&apos;;

(function(){

  // Your code starts here

}());
</code></pre><h4 id="推荐-2"><a href="#推荐-2" class="headerlink" title="推荐"></a>推荐</h4><pre><code>(function(){
  &apos;use strict&apos;;

  // Your code starts here

}());
</code></pre><h2 id="变量申明"><a href="#变量申明" class="headerlink" title="变量申明"></a>变量申明</h2><p>总是使用 var 来声明变量。如不指定 var，变量将被隐式地声明为全局变量，这将对变量难以控制。如果没有声明，变量处于什么定义域就变得不清（可以是在 Document 或 Window 中，也可以很容易地进入本地定义域）。所以，请总是使用 var 来声明变量。</p>
<p>采用严格模式带来的好处是，当你手误输入错误的变量名时，它可以通过报错信息来帮助你定位错误出处。</p>
<h4 id="不推荐-3"><a href="#不推荐-3" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>x = 10;
y = 100;
</code></pre><h4 id="推荐-3"><a href="#推荐-3" class="headerlink" title="推荐"></a>推荐</h4><pre><code>var x = 10,
    y = 100;
</code></pre><h2 id="理解-JavaScript-的定义域和定义域提升"><a href="#理解-JavaScript-的定义域和定义域提升" class="headerlink" title="理解 JavaScript 的定义域和定义域提升"></a>理解 JavaScript 的定义域和定义域提升</h2><p>在 JavaScript 中变量和方法定义会自动提升到执行之前。JavaScript 只有 function 级的定义域，而无其他很多编程语言中的块定义域，所以使得你在某一 function 内的某语句和循环体中定义了一个变量，此变量可作用于整个 function 内，而不仅仅是在此语句或循环体中，因为它们的声明被 JavaScript 自动提升了。</p>
<p>我们通过例子来看清楚这到底是怎么一回事：</p>
<h4 id="原function"><a href="#原function" class="headerlink" title="原function"></a>原function</h4><pre><code>(function(log){
  &apos;use strict&apos;;

  var a = 10;

  for(var i = 0; i &lt; a; i++) {
    var b = i * i;
    log(b);
  }

  if(a === 10) {
    var f = function() {
      log(a);
    };
    f();
  }

  function x() {
    log(&apos;Mr. X!&apos;);
  }
  x();

}(window.console.log));
</code></pre><h4 id="被JS提升过后"><a href="#被JS提升过后" class="headerlink" title="被JS提升过后"></a>被JS提升过后</h4><pre><code>(function(log){
  &apos;use strict&apos;;
  // All variables used in the closure will be hoisted to the top of the function
  var a,
      i,
      b,
      f;
  // All functions in the closure will be hoisted to the top
  function x() {
    log(&apos;Mr. X!&apos;);
  }

  a = 10;

  for(i = 0; i &lt; a; i++) {
    b = i * i;
    log(b);
  }

  if(a === 10) {
    // Function assignments will only result in hoisted variables but the function body will not be hoisted
    // Only by using a real function declaration the whole function will be hoisted with its body
    f = function() {
      log(a);
    };
    f();
  }

  x();

}(window.console.log));
</code></pre><p>根据以上提升过程，你是否可理解以下代码？</p>
<h4 id="有效代码"><a href="#有效代码" class="headerlink" title="有效代码"></a>有效代码</h4><pre><code>(function(log){
  &apos;use strict&apos;;

  var a = 10;

  i = 5;

  x();

  for(var i; i &lt; a; i++) {
    log(b);
    var b = i * i;
  }

  if(a === 10) {
    f = function() {
      log(a);
    };
    f();

    var f;
  }

  function x() {
    log(&apos;Mr. X!&apos;);
  }

}(window.console.log));
</code></pre><p>正如你所看到的这段令人充满困惑与误解的代码导致了出人意料的结果。只有良好的声明习惯，也就是下一章节我们要提到的声明规则，才能尽可能的避免这类错误风险。</p>
<p>提升声明</p>
<p>为避免上一章节所述的变量和方法定义被自动提升造成误解，把风险降到最低，我们应该手动地显示地去声明变量与方法。也就是说，所有的变量以及方法，应当定义在 function 内的首行。</p>
<p>只用一个 var 关键字声明，多个变量用逗号隔开。        </p>
<h4 id="不推荐-4"><a href="#不推荐-4" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>(function(log){
  &apos;use strict&apos;;

  var a = 10;
  var b = 10;

  for(var i = 0; i &lt; 10; i++) {
    var c = a * b * i;
  }

  function f() {

  }

  var d = 100;
  var x = function() {
    return d * d;
  };
  log(x());

}(window.console.log));
</code></pre><h4 id="推荐-4"><a href="#推荐-4" class="headerlink" title="推荐"></a>推荐</h4><pre><code>(function(log){
  &apos;use strict&apos;;

  var a = 10,
      b = 10,
      i,
      c,
      d,
      x;

  function f() {

  }

  for(i = 0; i &lt; 10; i++) {
    c = a * b * i;
  }



  d = 100;
  x = function() {
    return d * d;
  };
  log(x());

}(window.console.log));
</code></pre><p>把赋值尽量写在变量申明中。</p>
<h4 id="不推荐-5"><a href="#不推荐-5" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>var a,
    b,
    c;

a = 10;
b = 10;
c = 100;
</code></pre><h4 id="推荐-5"><a href="#推荐-5" class="headerlink" title="推荐"></a>推荐</h4><pre><code>var a = 10,
    b = 10,
    c = 100;
</code></pre><h2 id="总是使用带类型判断的比较判断"><a href="#总是使用带类型判断的比较判断" class="headerlink" title="总是使用带类型判断的比较判断"></a>总是使用带类型判断的比较判断</h2><p>总是使用 <code>===</code> 精确的比较操作符，避免在判断的过程中，由 JavaScript 的强制类型转换所造成的困扰。</p>
<p>如果你使用 <code>===</code> 操作符，那比较的双方必须是同一类型为前提的条件下才会有效。</p>
<p>如果你想了解更多关于强制类型转换的信息，你可以读一读 <a href="http://dmitrysoshnikov.com/notes/note-2-ecmascript-equality-operators/" target="_blank" rel="external">Dmitry Soshnikov</a> 的这篇文章。</p>
<p>在只使用 <code>==</code> 的情况下，JavaScript 所带来的强制类型转换使得判断结果跟踪变得复杂，下面的例子可以看出这样的结果有多怪了：</p>
<pre><code>(function(log){
  &apos;use strict&apos;;

  log(&apos;0&apos; == 0); // true
  log(&apos;&apos; == false); // true
  log(&apos;1&apos; == true); // true
  log(null == undefined); // true

  var x = {
    valueOf: function() {
      return &apos;X&apos;;
    }
  };

  log(x == &apos;X&apos;);

}(window.console.log));
</code></pre><h2 id="明智地使用真假判断"><a href="#明智地使用真假判断" class="headerlink" title="明智地使用真假判断"></a>明智地使用真假判断</h2><p>当我们在一个 if 条件语句中使用变量或表达式时，会做真假判断。if(a == true) 是不同于 if(a) 的。后者的判断比较特殊，我们称其为真假判断。这种判断会通过特殊的操作将其转换为 true 或 false，下列表达式统统返回 false：false, 0, undefined, null, NaN, ‘’（空字符串）.</p>
<p>这种真假判断在我们只求结果而不关心过程的情况下，非常的有帮助。</p>
<p>以下示例展示了真假判断是如何工作的：</p>
<pre><code>(function(log){
  &apos;use strict&apos;;

  function logTruthyFalsy(expr) {
    if(expr) {
      log(&apos;truthy&apos;);
    } else {
      log(&apos;falsy&apos;);
    }
  }

  logTruthyFalsy(true); // truthy
  logTruthyFalsy(1); // truthy
  logTruthyFalsy({}); // truthy
  logTruthyFalsy([]); // truthy
  logTruthyFalsy(&apos;0&apos;); // truthy

  logTruthyFalsy(false); // falsy
  logTruthyFalsy(0); // falsy
  logTruthyFalsy(undefined); // falsy
  logTruthyFalsy(null); // falsy
  logTruthyFalsy(NaN); // falsy
  logTruthyFalsy(&apos;&apos;); // falsy

}(window.console.log));
</code></pre><h2 id="变量赋值时的逻辑操作"><a href="#变量赋值时的逻辑操作" class="headerlink" title="变量赋值时的逻辑操作"></a>变量赋值时的逻辑操作</h2><p>逻辑操作符 <code>||</code> 和 <code>&amp;&amp;</code> 也可被用来返回布尔值。如果操作对象为非布尔对象，那每个表达式将会被自左向右地做真假判断。基于此操作，最终总有一个表达式被返回回来。这在变量赋值时，是可以用来简化你的代码的。</p>
<h4 id="不推荐-6"><a href="#不推荐-6" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>if(!x) {
  if(!y) {
    x = 1;
  } else {
    x = y;
  }
}
</code></pre><h4 id="推荐-6"><a href="#推荐-6" class="headerlink" title="推荐"></a>推荐</h4><pre><code>x = x || y || 1;
</code></pre><p>这一小技巧经常用来给方法设定默认的参数。</p>
<pre><code>(function(log){
  &apos;use strict&apos;;

  function multiply(a, b) {
    a = a || 1;
    b = b || 1;

    log(&apos;Result &apos; + a * b);
  }

  multiply(); // Result 1
  multiply(10); // Result 10
  multiply(3, NaN); // Result 3
  multiply(9, 5); // Result 45

}(window.console.log));
</code></pre><h2 id="分号"><a href="#分号" class="headerlink" title="分号"></a>分号</h2><p>总是使用分号，因为隐式的代码嵌套会引发难以察觉的问题。当然我们更要从根本上来杜绝这些问题[1] 。以下几个示例展示了缺少分号的危害：</p>
<pre><code>// 1.
MyClass.prototype.myMethod = function() {
  return 42;
}  // No semicolon here.

(function() {
  // Some initialization code wrapped in a function to create a scope for locals.
})();


var x = {
  &apos;i&apos;: 1,
  &apos;j&apos;: 2
}  // No semicolon here.

// 2.  Trying to do one thing on Internet Explorer and another on Firefox.
// I know you&apos;d never write code like this, but throw me a bone.
[ffVersion, ieVersion][isIE]();


var THINGS_TO_EAT = [apples, oysters, sprayOnCheese]  // No semicolon here.

// 3. conditional execution a la bash
-1 == resultOfOperation() || die();
</code></pre><p><strong>So what happens?</strong></p>
<ul>
<li>JavaScript 错误 —— 首先返回 42 的那个 function 被第二个 function 当中参数传入调用，接着数字 42 也被“调用”而导致出错。</li>
<li>八成你会得到 ‘no such property in undefined’ 的错误提示，因为在真实环境中的调用是这个样子：<code>x[ffVersion, ieVersion][isIE]()</code>.</li>
<li><code>die</code> 总是被调用。因为数组减 1 的结果是 NaN，它不等于任何东西（无论 <code>resultOfOperation</code> 是否返回 <code>NaN</code>）。所以最终的结果是 <code>die()</code> 执行完所获得值将赋给 <code>THINGS_TO_EAT</code>.</li>
</ul>
<p><strong>Why?</strong></p>
<p>JavaScript 中语句要以分号结束，否则它将会继续执行下去，不管换不换行。以上的每一个示例中，函数声明或对象或数组，都变成了在一句语句体内。要知道闭合圆括号并不代表语句结束，JavaScript 不会终结语句，除非它的下一个 token 是一个中缀符[2] 或者是圆括号操作符。</p>
<p>这真是让人大吃一惊，所以乖乖地给语句末加上分号吧。</p>
<p><strong>澄清：分号与函数</strong></p>
<p>分号需要用在表达式的结尾，而并非函数声明的结尾。区分它们最好的例子是：</p>
<pre><code>var foo = function() {
  return true;
};  // semicolon here.

function foo() {
  return true;
}  // no semicolon here.
</code></pre><h2 id="嵌套函数"><a href="#嵌套函数" class="headerlink" title="嵌套函数"></a>嵌套函数</h2><p>嵌套函数是非常有用的，比如用在持续创建和隐藏辅助函数的任务中。你可以非常自由随意地使用它们。</p>
<h2 id="语句块内的函数声明"><a href="#语句块内的函数声明" class="headerlink" title="语句块内的函数声明"></a>语句块内的函数声明</h2><p>切勿在语句块内声明函数，在 ECMAScript 5 的严格模式下，这是不合法的。函数声明应该在定义域的顶层。但在语句块内可将函数申明转化为函数表达式赋值给变量。</p>
<p><strong>不推荐</strong></p>
<pre><code>if (x) {
  function foo() {}
}
</code></pre><p><strong>推荐</strong></p>
<pre><code>if (x) {
  var foo = function() {};
}
</code></pre><h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><p>基本上你无法避免出现异常，特别是在做大型开发时（使用应用开发框架等等）。</p>
<p>在没有自定义异常的情况下，从有返回值的函数中返回错误信息一定非常的棘手，更别提多不优雅了。不好的解决方案包括了传第一个引用类型来接纳错误信息，或总是返回一个对象列表，其中包含着可能的错误对象。以上方式基本上是比较简陋的异常处理方式。适时可做自定义异常处理。</p>
<p>在复杂的环境中，你可以考虑抛出对象而不仅仅是字符串（默认的抛出值）。</p>
<pre><code>if(name === undefined) {
  throw {
    name: &apos;System Error&apos;,
    message: &apos;A name should always be specified!&apos;
  }
}
</code></pre><p>##标准特性##</p>
<p>总是优先考虑使用标准特性。为了最大限度地保证扩展性与兼容性，总是首选标准的特性，而不是非标准的特性（例如：首选 string.charAt(3) 而不是 string[3]；首选 DOM 的操作方法来获得元素引用，而不是某一应用特定的快捷方法）。</p>
<p>##简单的原型继承##</p>
<p>如果你想在 JavaScript 中继承你的对象，请遵循一个简易的模式来创建此继承。如果你预计你会遇上复杂对象的继承，那可以考虑采用一个继承库，比如 Proto.js by Axel Rauschmayer.</p>
<p>简易继承请用以下方式：</p>
<pre><code>(function(log){
  &apos;use strict&apos;;

  // Constructor function
  function Apple(name) {
    this.name = name;
  }
  // Defining a method of apple
  Apple.prototype.eat = function() {
    log(&apos;Eating &apos; + this.name);
  };

  // Constructor function
  function GrannySmithApple() {
    // Invoking parent constructor
    Apple.prototype.constructor.call(this, &apos;Granny Smith&apos;);
  }
  // Set parent prototype while creating a copy with Object.create
  GrannySmithApple.prototype = Object.create(Apple.prototype);
  // Set constructor to the sub type, otherwise points to Apple
  GrannySmithApple.prototype.constructor = GrannySmithApple;

  // Calling a super method
  GrannySmithApple.prototype.eat = function() {
    // Be sure to apply it onto our current object with call(this)
    Apple.prototype.eat.call(this);

    log(&apos;Poor Grany Smith&apos;);
  };

  // Instantiation
  var apple = new Apple(&apos;Test Apple&apos;);
  var grannyApple = new GrannySmithApple();

  log(apple.name); // Test Apple
  log(grannyApple.name); // Granny Smith

  // Instance checks
  log(apple instanceof Apple); // true
  log(apple instanceof GrannySmithApple); // false

  log(grannyApple instanceof Apple); // true
  log(grannyApple instanceof GrannySmithApple); // true

  // Calling method that calls super method
  grannyApple.eat(); // Eating Granny Smith\nPoor Grany Smith

}(window.console.log));
</code></pre><h2 id="使用闭包"><a href="#使用闭包" class="headerlink" title="使用闭包"></a>使用闭包</h2><p>闭包的创建也许是 JS 最有用也是最易被忽略的能力了。<a href="http://jibbering.com/faq/faq_notes/closures.html" target="_blank" rel="external">关于闭包如何工作的合理解释。</a></p>
<h2 id="切勿在循环中创建函数"><a href="#切勿在循环中创建函数" class="headerlink" title="切勿在循环中创建函数"></a>切勿在循环中创建函数</h2><p>在简单的循环语句中加入函数是非常容易形成闭包而带来隐患的。下面的例子就是一个典型的陷阱：</p>
<p><strong>不推荐</strong></p>
<pre><code>(function(log, w){
  &apos;use strict&apos;;

  // numbers and i is defined in the current function closure
  var numbers = [1, 2, 3],
      i;

  for(i = 0; i &lt; numbers.length; i++) {
    w.setTimeout(function() {
      // At the moment when this gets executed the i variable, coming from the outer function scope
      // is set to 3 and the current program is alerting the message 3 times
      // &apos;Index 3 with number undefined
      // If you understand closures in javascript you know how to deal with those cases
      // It&apos;s best to just avoid functions / new closures in loops as this prevents those issues

      w.alert(&apos;Index &apos; + i + &apos; with number &apos; + numbers[i]);
    }, 0);
  }

}(window.console.log, window));
</code></pre><p>接下来的改进虽然已经解决了上述例子中的问题或 bug，但还是违反了不在循环中创建函数或闭包的原则。</p>
<p><strong>不推荐</strong></p>
<pre><code>(function(log, w){
  &apos;use strict&apos;;

  // numbers and i is defined in the current function closure
  var numbers = [1, 2, 3],
      i;

  for(i = 0; i &lt; numbers.length; i++) {
    // Creating a new closure scope with an IIFE solves the problem
    // The delayed function will use index and number which are
    // in their own closure scope (one closure per loop iteration).
    // ---
    // Still this is not recommended as we violate our rule to not
    // create functions within loops and we are creating two!

    (function(index, number){
      w.setTimeout(function() {
        // Will output as expected 0 &gt; 1, 1 &gt; 2, 2 &gt; 3
        w.alert(&apos;Index &apos; + index + &apos; with number &apos; + number);
      }, 0);
    }(i, numbers[i]));
  }

}(window.console.log, window));
</code></pre><p>接下来的改进已解决问题，而且也遵循了规范。可是，你会发现看上去似乎过于复杂繁冗了，应该会有更好的解决方案吧。</p>
<p><strong>不完全推荐</strong></p>
<pre><code>(function(log, w){
  &apos;use strict&apos;;

  // numbers and i is defined in the current function closure
  var numbers = [1, 2, 3],
      i;

  // Create a function outside of the loop that will accept arguments to create a
  // function closure scope. This function will return a function that executes in this
  // closure parent scope.
  function alertIndexWithNumber(index, number) {
    return function() {
      w.alert(&apos;Index &apos; + index + &apos; with number &apos; + number);
    };
  }

  // First parameter is a function call that returns a function.
  // ---
  // This solves our problem and we don&apos;t create a function inside our loop
  for(i = 0; i &lt; numbers.length; i++) {
    w.setTimeout(alertIndexWithNumber(i, numbers[i]), 0);
  }

}(window.console.log, window));
</code></pre><p>将循环语句转换为函数执行的方式问题能得到立马解决，每一次循环都会对应地创建一次闭包。函数式的风格更加值得推荐，而且看上去也更加地自然和可预料。</p>
<p><strong>推荐</strong></p>
<pre><code>(function(log, w){
  &apos;use strict&apos;;

  // numbers and i is defined in the current function closure
  var numbers = [1, 2, 3],
      i;

  numbers.forEach(function(number, index) {
    w.setTimeout(function() {
      w.alert(&apos;Index &apos; + index + &apos; with number &apos; + number);
    }, 0);
  });

}(window.console.log, window));
</code></pre><h2 id="eval-函数（魔鬼）"><a href="#eval-函数（魔鬼）" class="headerlink" title="eval 函数（魔鬼）"></a>eval 函数（魔鬼）</h2><p><code>eval()</code> 不但混淆语境还很危险，总会有比这更好、更清晰、更安全的另一种方案来写你的代码，因此尽量不要使用 evil 函数。</p>
<h2 id="this-关键字"><a href="#this-关键字" class="headerlink" title="this 关键字"></a>this 关键字</h2><p>只在对象构造器、方法和在设定的闭包中使用 this 关键字。this 的语义在此有些误导。它时而指向全局对象（大多数时），时而指向调用者的定义域（在 eval 中），时而指向 DOM 树中的某一节点（当用事件处理绑定到 HTML 属性上时），时而指向一个新创建的对象（在构造器中），还时而指向其它的一些对象（如果函数被 call() 和 apply() 执行和调用时）。</p>
<p>正因为它是如此容易地被搞错，请限制它的使用场景：</p>
<ul>
<li>在构造函数中</li>
<li>在对象的方法中（包括由此创建出的闭包内）</li>
</ul>
<h2 id="首选函数式风格"><a href="#首选函数式风格" class="headerlink" title="首选函数式风格"></a>首选函数式风格</h2><p>函数式编程让你可以简化代码并缩减维护成本，因为它容易复用，又适当地解耦和更少的依赖。</p>
<p>接下来的例子中，在一组数字求和的同一问题上，比较了两种解决方案。第一个例子是经典的程序处理，而第二个例子则是采用了函数式编程和 ECMA Script 5.1 的数组方法。</p>
<p>例外：往往在重代码性能轻代码维护的情况之下，要选择最优性能的解决方案而非维护性高的方案（比如用简单的循环语句代替 forEach）。</p>
<p><strong>不推荐</strong></p>
<pre><code>(function(log){
  &apos;use strict&apos;;

  var arr = [10, 3, 7, 9, 100, 20],
      sum = 0,
      i;


  for(i = 0; i &lt; arr.length; i++) {
    sum += arr[i];
  }

  log(&apos;The sum of array &apos; + arr + &apos; is: &apos; + sum)

}(window.console.log));
</code></pre><p><strong>推荐</strong></p>
<pre><code>(function(log){
  &apos;use strict&apos;;

  var arr = [10, 3, 7, 9, 100, 20];

  var sum = arr.reduce(function(prevValue, currentValue) {
    return prevValue + currentValue;
  }, 0);

  log(&apos;The sum of array &apos; + arr + &apos; is: &apos; + sum);

}(window.console.log));
</code></pre><p>另一个例子通过某一规则对一个数组进行过滤匹配来创建一个新的数组。</p>
<p><strong>不推荐</strong></p>
<pre><code>(function(log){
  &apos;use strict&apos;;

  var numbers = [11, 3, 7, 9, 100, 20, 14, 10],
      numbersGreaterTen = [],
      i;


  for(i = 0; i &lt; numbers.length; i++) {
    if(numbers[i] &gt; 10) {
      numbersGreaterTen.push(numbers[i]);
    }
  }

  log(&apos;From the list of numbers &apos; + numbers + &apos; only &apos; + numbersGreaterTen + &apos; are greater than ten&apos;);

}(window.console.log));
</code></pre><p><strong>推荐</strong></p>
<pre><code>(function(log){
  &apos;use strict&apos;;

  var numbers = [11, 3, 7, 9, 100, 20, 14, 10];

  var numbersGreaterTen = numbers.filter(function(element) {
    return element &gt; 10;
  });

  log(&apos;From the list of numbers &apos; + numbers + &apos; only &apos; + numbersGreaterTen + &apos; are greater than ten&apos;);

}(window.console.log));
</code></pre><h2 id="使用-ECMA-Script-5"><a href="#使用-ECMA-Script-5" class="headerlink" title="使用 ECMA Script 5"></a>使用 ECMA Script 5</h2><p>建议使用 ECMA Script 5 中新增的语法糖和函数。这将简化你的程序，并让你的代码更加灵活和可复用。</p>
<h4 id="数组和对象的属性迭代"><a href="#数组和对象的属性迭代" class="headerlink" title="数组和对象的属性迭代"></a>数组和对象的属性迭代</h4><p>用 ECMA5 的迭代方法来迭代数组。使用 <code>Array.forEach</code> 或者如果你要在特殊场合下中断迭代，那就用 <code>Array.every</code>。</p>
<pre><code>(function(log){
  &apos;use strict&apos;;

  // Iterate over an array and break at a certain condition
  [1, 2, 3, 4, 5].every(function(element, index, arr) {
    log(element + &apos; at index &apos; + index + &apos; in array &apos; + arr);

    if(index !== 5) {
      return true;
    }
  });

  // Defining a simple javascript object
  var obj = {
    a: &apos;A&apos;,
    b: &apos;B&apos;,
    &apos;c-d-e&apos;: &apos;CDE&apos;
  };

  // Iterating over the object keys
  Object.keys(obj).forEach(function(element, index, arr) {
    log(&apos;Key &apos; + element + &apos; has value &apos; + obj[element]);
  });

}(window.console.log));
</code></pre><h2 id="不要使用-switch"><a href="#不要使用-switch" class="headerlink" title="不要使用 switch"></a>不要使用 switch</h2><p>switch 在所有的编程语言中都是个非常错误的难以控制的语句，建议用 if else 来替换它。</p>
<h2 id="数组和对象字面量"><a href="#数组和对象字面量" class="headerlink" title="数组和对象字面量"></a>数组和对象字面量</h2><p>用数组和对象字面量来代替数组和对象构造器。数组构造器很容易让人在它的参数上犯错。</p>
<p><strong>不推荐</strong></p>
<pre><code>// Length is 3.
var a1 = new Array(x1, x2, x3);

// Length is 2.
var a2 = new Array(x1, x2);

// If x1 is a number and it is a natural number the length will be x1.
// If x1 is a number but not a natural number this will throw an exception.
// Otherwise the array will have one element with x1 as its value.
var a3 = new Array(x1);

// Length is 0.
var a4 = new Array();
</code></pre><p>正因如此，如果将代码传参从两个变为一个，那数组很有可能发生意料不到的长度变化。为避免此类怪异状况，请总是采用更多可读的数组字面量。</p>
<p><strong>推荐</strong></p>
<pre><code>var a = [x1, x2, x3];
var a2 = [x1, x2];
var a3 = [x1];
var a4 = [];
</code></pre><p>对象构造器不会有类似的问题，但是为了可读性和统一性，我们应该使用对象字面量。</p>
<p><strong>不推荐</strong></p>
<pre><code>var o = new Object();

var o2 = new Object();
o2.a = 0;
o2.b = 1;
o2.c = 2;
o2[&apos;strange key&apos;] = 3;
</code></pre><p>应该写成这样：</p>
<p><strong>推荐</strong></p>
<pre><code>var o = {};

var o2 = {
  a: 0,
  b: 1,
  c: 2,
  &apos;strange key&apos;: 3
};
</code></pre><h2 id="修改内建对象的原型链"><a href="#修改内建对象的原型链" class="headerlink" title="修改内建对象的原型链"></a>修改内建对象的原型链</h2><p>修改内建的诸如 <code>Object.prototype</code> 和 <code>Array.prototype</code> 是被严厉禁止的。修改其它的内建对象比如 <code>Function.prototype</code>，虽危害没那么大，但始终还是会导致在开发过程中难以 debug 的问题，应当也要避免。</p>
<h2 id="自定义-toString-方法"><a href="#自定义-toString-方法" class="headerlink" title="自定义 toString() 方法"></a>自定义 toString() 方法</h2><p>你可以通过自定义 <code>toString()</code> 来控制对象字符串化。这很好，但你必须保证你的方法总是成功并不会有其它副作用。如果你的方法达不到这样的标准，那将会引发严重的问题。如果 <code>toString()</code> 调用了一个方法，这个方法做了一个断言[3] ，当断言失败，它可能会输出它所在对象的名称，当然对象也需要调用 <code>toString()</code>。</p>
<h2 id="圆括号"><a href="#圆括号" class="headerlink" title="圆括号"></a>圆括号</h2><p>一般在语法和语义上真正需要时才谨慎地使用圆括号。不要用在一元操作符上，例如 <code>delete</code>, <code>typeof</code> 和 <code>void</code>，或在关键字之后，例如 <code>return</code>, <code>throw</code>, <code>case</code>, <code>new</code> 等。</p>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p>统一使用单引号(‘)，不使用双引号(“)。这在创建 HTML 字符串非常有好处：</p>
<pre><code>var msg = &apos;This is some HTML &lt;div class=&quot;makes-sense&quot;&gt;&lt;/div&gt;&apos;;
</code></pre><h2 id="三元条件判断（if-的快捷方法）"><a href="#三元条件判断（if-的快捷方法）" class="headerlink" title="三元条件判断（if 的快捷方法）"></a>三元条件判断（if 的快捷方法）</h2><p>用三元操作符分配或返回语句。在比较简单的情况下使用，避免在复杂的情况下使用。没人愿意用 10 行三元操作符把自己的脑子绕晕。</p>
<p><strong>不推荐</strong></p>
<pre><code>if(x === 10) {
  return &apos;valid&apos;;
} else {
  return &apos;invalid&apos;;
}
</code></pre><p><strong>推荐</strong></p>
<pre><code>return x === 10 ? &apos;valid&apos; : &apos;invalid&apos;;
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端编码规范/">前端编码规范</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="photo-编码规范/前端开发编码规范（一）" class="article article-type-photo" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/15/编码规范/前端开发编码规范（一）/" class="article-date">
  	<time datetime="2016-10-15T08:40:23.000Z" itemprop="datePublished">2016-10-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/15/编码规范/前端开发编码规范（一）/">前端编码规范（一）</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="一般规范"><a href="#一般规范" class="headerlink" title="一般规范"></a>一般规范</h1><p>转载自：<a href="http://www.css88.com/archives/5361" target="_blank" rel="external">前端编码规范（1）—— 一般规范</a></p>
<h2 id="文件-资源命名"><a href="#文件-资源命名" class="headerlink" title="文件/资源命名"></a>文件/资源命名</h2><p>在 web 项目中，所有的文件名应该都遵循同一命名约定。以可读性而言，减号（-）是用来分隔文件名的不二之选。同时它也是常见的 URL 分隔符（i.e. //example.com/blog/my-blog-entry or //s.example.com/images/big-black-background.jpg），所以理所当然的，减号应该也是用来分隔资源名称的好选择。</p>
<p>请确保文件命名总是以字母开头而不是数字。而以特殊字符开头命名的文件，一般都有特殊的含义与用处（比如 compass[1] 中的下划线就是用来标记跳过直接编译的文件用的）。</p>
<p>资源的字母名称必须全为小写，这是因为在某些对大小写字母敏感的操作系统中，当文件通过工具压缩混淆后，或者人为修改过后，大小写不同而导致引用文件不同的错误，很难被发现。</p>
<p>还有一些情况下，需要对文件增加前后缀或特定的扩展名（比如 .min.js, .min.css），抑或一串前缀（比如 3fa89b.main.min.css）。这种情况下，建议使用点分隔符来区分这些在文件名中带有清晰意义的元数据。</p>
<h4 id="不推荐"><a href="#不推荐" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>MyScript.js
myCamelCaseName.css
i_love_underscores.html
1001-scripts.js
my-file-min.css
</code></pre><h4 id="推荐"><a href="#推荐" class="headerlink" title="推荐"></a>推荐</h4><pre><code>my-script.js
my-camel-case-name.css
i-love-underscores.html
thousand-and-one-scripts.js
my-file.min.css
</code></pre><hr>
<h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><p>不要指定引入资源所带的具体协议。</p>
<p>当引入图片或其他媒体文件，还有样式和脚本时，URLs 所指向的具体路径，不要指定协议部分（http:, https:），除非这两者协议都不可用。</p>
<p>不指定协议使得 URL 从绝对的获取路径转变为相对的，在请求资源协议无法确定时非常好用，而且还能为文件大小节省几个字节。</p>
<h4 id="不推荐-1"><a href="#不推荐-1" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>&lt;script src=&quot;http://cdn.com/foundation.min.js&quot;&gt;&lt;/script&gt;
</code></pre><h4 id="推荐-1"><a href="#推荐-1" class="headerlink" title="推荐"></a>推荐</h4><pre><code>&lt;script src=&quot;//cdn.com/foundation.min.js&quot;&gt;&lt;/script&gt;
</code></pre><h4 id="不推荐-2"><a href="#不推荐-2" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>.example {
  background: url(http://static.example.com/images/bg.jpg);
}
</code></pre><h4 id="推荐-2"><a href="#推荐-2" class="headerlink" title="推荐"></a>推荐</h4><pre><code>.example {
  background: url(//static.example.com/images/bg.jpg);
}
</code></pre><hr>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>注释是你自己与你的小伙伴们了解代码写法和目的的唯一途径。特别是在写一些看似琐碎的无关紧要的代码时，由于记忆点不深刻，注释就变得尤为重要了。</p>
<p>编写自解释代码只是一个传说，没有任何代码是可以完全自解释的。而代码注释，则是永远也不嫌多。</p>
<p>当你写注释时一定要注意：不要写你的代码都干了些什么，而要写你的代码为什么要这么写，背后的考量是什么。当然也可以加入所思考问题或是解决方案的链接地址。</p>
<h4 id="不推荐-3"><a href="#不推荐-3" class="headerlink" title="不推荐"></a>不推荐</h4><pre><code>var offset = 0;

if(includeLabels) {
  // Add offset of 20
  offset = 20;
}
</code></pre><h4 id="推荐-3"><a href="#推荐-3" class="headerlink" title="推荐"></a>推荐</h4><pre><code>var offset = 0;

if(includeLabels) {
  // If the labels are included we need to have a minimum offset of 20 pixels
  // We need to set it explicitly because of the following bug: http://somebrowservendor.com/issue-tracker/ISSUE-1
  offset = 20;
}
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端编码规范/">前端编码规范</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="web-双向绑定的实现（一）" class="article article-type-web" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/09/19/双向绑定的实现（一）/" class="article-date">
  	<time datetime="2016-09-19T02:04:18.000Z" itemprop="datePublished">2016-09-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/19/双向绑定的实现（一）/">双向绑定的实现，基于脏值检查</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="双向绑定的实现（脏值检查）"><a href="#双向绑定的实现（脏值检查）" class="headerlink" title="双向绑定的实现（脏值检查）"></a>双向绑定的实现（脏值检查）</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">var Scope = <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    this.$<span class="variable">$watchers</span> = [];</span><br><span class="line">&#125;</span><br><span class="line">Scope.prototype = &#123;</span><br><span class="line">    <span class="variable">$watch</span>: <span class="keyword">function</span>(watchExp, listener) &#123;</span><br><span class="line">        this.$<span class="variable">$watchers</span>.push(&#123;</span><br><span class="line">            watchExp: watchExp,</span><br><span class="line">            listener: listener || <span class="function"><span class="title">function</span></span>() &#123;&#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="variable">$digest</span>: <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">        var dirty;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            dirty = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">for</span> (var i = 0; i &lt; this.$<span class="variable">$watchers</span>.length; i++) &#123;</span><br><span class="line">                var newValue = this.$<span class="variable">$watchers</span>[i].watchExp(),</span><br><span class="line">                    oldValue = this.$<span class="variable">$watchers</span>[i].last;</span><br><span class="line">                <span class="keyword">if</span> (newValue !== oldValue) &#123;</span><br><span class="line">                    this.$<span class="variable">$watchers</span>[i].listener(newValue, oldValue);</span><br><span class="line">                    dirty = <span class="literal">true</span>;</span><br><span class="line">                    this.$<span class="variable">$watchers</span>[i].last = newValue;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">while</span> (dirty)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 接下来实例化Scope对象</span><br><span class="line"></span><br><span class="line">var <span class="variable">$scope</span> = new Scope();</span><br><span class="line"></span><br><span class="line"><span class="variable">$scope</span>.name = <span class="string">'wuchenyu'</span>;</span><br><span class="line"><span class="variable">$scope</span>.<span class="variable">$watch</span>(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> <span class="variable">$scope</span>.name;</span><br><span class="line">&#125;, <span class="keyword">function</span>(newValue, oldValue) &#123;</span><br><span class="line">    console.log(newValue, oldValue); // 输出 wuchenyu  undefined </span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$scope</span>.<span class="variable">$digest</span>();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>这样基本就实现了简单的 脏值 检查，现在把scope对象与我们DOM事件关联在一起就可以实现简单的双向绑定了。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"zh-CN"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;双向绑定的实现（一）&lt;/title&gt;</span><br><span class="line">    &lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">"format-detection"</span> content=<span class="string">"telephone=no"</span> /&gt;</span><br><span class="line">    &lt;style <span class="built_in">type</span>=<span class="string">"text/css"</span>&gt;</span><br><span class="line">    input[<span class="built_in">type</span>=<span class="string">'text'</span>]&#123;</span><br><span class="line">        border-color: <span class="comment">#000;</span></span><br><span class="line">        display: block;</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    输入：&lt;input <span class="built_in">type</span>=<span class="string">"text"</span>&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    输出：&lt;input <span class="built_in">type</span>=<span class="string">"text"</span>&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">var Scope = <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    this.$<span class="variable">$watchers</span> = [];</span><br><span class="line">&#125;</span><br><span class="line">Scope.prototype = &#123;</span><br><span class="line">    <span class="variable">$watch</span>: <span class="keyword">function</span>(watchExp, listener) &#123;</span><br><span class="line">        this.$<span class="variable">$watchers</span>.push(&#123;</span><br><span class="line">            watchExp: watchExp,</span><br><span class="line">            listener: listener || <span class="function"><span class="title">function</span></span>() &#123;&#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="variable">$digest</span>: <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">        var dirty;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            dirty = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">for</span> (var i = 0; i &lt; this.$<span class="variable">$watchers</span>.length; i++) &#123;</span><br><span class="line">                var newValue = this.$<span class="variable">$watchers</span>[i].watchExp(),</span><br><span class="line">                    oldValue = this.$<span class="variable">$watchers</span>[i].last;</span><br><span class="line">                <span class="keyword">if</span> (newValue !== oldValue) &#123;</span><br><span class="line">                    this.$<span class="variable">$watchers</span>[i].listener(newValue, oldValue);</span><br><span class="line">                    dirty = <span class="literal">true</span>;</span><br><span class="line">                    this.$<span class="variable">$watchers</span>[i].last = newValue;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">while</span> (dirty)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 接下来实例化Scope对象</span><br><span class="line"></span><br><span class="line">var <span class="variable">$scope</span> = new Scope();</span><br><span class="line"></span><br><span class="line"><span class="variable">$scope</span>.name = <span class="string">'wuchenyu'</span>;</span><br><span class="line"></span><br><span class="line">var element = document.querySelectorAll(<span class="string">'input'</span>);</span><br><span class="line"></span><br><span class="line">element[0].onkeyup = <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    <span class="variable">$scope</span>.name = this.value;</span><br><span class="line">    <span class="variable">$scope</span>.<span class="variable">$digest</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$scope</span>.<span class="variable">$watch</span>(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> <span class="variable">$scope</span>.name;</span><br><span class="line">&#125;, <span class="keyword">function</span>(newValue, oldValue) &#123;</span><br><span class="line">    console.log(newValue, oldValue); // 输出 新值 和 旧值</span><br><span class="line">    element[1].value = newValue;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端框架原理/">前端框架原理</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-git flow实践" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/09/05/git flow实践/" class="article-date">
  	<time datetime="2016-09-04T16:39:06.000Z" itemprop="datePublished">2016-09-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Git-Flow-实践"><a href="#Git-Flow-实践" class="headerlink" title="Git Flow 实践"></a>Git Flow 实践</h1><h3 id="创建开发分支-develop"><a href="#创建开发分支-develop" class="headerlink" title="创建开发分支(develop)"></a>创建开发分支(develop)</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch develop</span><br><span class="line">$ git push -u runningcat develop</span><br></pre></td></tr></table></figure>
<h3 id="开始新的功能开发"><a href="#开始新的功能开发" class="headerlink" title="开始新的功能开发"></a>开始新的功能开发</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//基于develop分支在新增一个新功能开发的分支</span><br><span class="line">$ git checkout -b runningcat-feature-v1.0 develop</span><br><span class="line">$ git push -u runningcat runningcat-feature-v1.0</span><br></pre></td></tr></table></figure>
<h3 id="功能开发完成，合并分支"><a href="#功能开发完成，合并分支" class="headerlink" title="功能开发完成，合并分支"></a>功能开发完成，合并分支</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 保证开发分支是最新的</span><br><span class="line">$ git pull runningcat develop</span><br><span class="line">// 切换至开发分支</span><br><span class="line">$ git checkout develop</span><br><span class="line">// 合并分支 （将新功能迭代开发的分支合并）</span><br><span class="line">$ git merge --no-ff runningcat-feature-v1.0</span><br><span class="line">// 将分支同步至线上</span><br><span class="line">$ git push runningcat develop</span><br><span class="line">// 删除新功能开发分支</span><br><span class="line">$ git branch <span class="_">-d</span> runningcat-feature-v1.0</span><br><span class="line">// 如果开发分支同步至线上，那么就需要删除线上的分支</span><br><span class="line">$ git push runningcat --delete runningcat-feature-v1.0</span><br></pre></td></tr></table></figure>
<h3 id="开始-Release"><a href="#开始-Release" class="headerlink" title="开始 Release"></a>开始 Release</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 新增发布分支</span><br><span class="line">$ git checkout -b runningcat/release-0.1.0 develop</span><br><span class="line">// 发布中出现的问题，BUG的修复全部提交至 runningcat/release-0.1.0 分支，事后发布完成把 runningcat/release-0.1.0 分支合并至 develop 分支</span><br></pre></td></tr></table></figure>
<h3 id="完成-Release"><a href="#完成-Release" class="headerlink" title="完成 Release"></a>完成 Release</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 切换到master分支</span><br><span class="line">$ git checkout master</span><br><span class="line">// 合并分支</span><br><span class="line">$ git merge --no-ff runningcat/release-0.1.0</span><br><span class="line">// 同步分支</span><br><span class="line">$ git push</span><br><span class="line"></span><br><span class="line">// 切换到 develop 分支</span><br><span class="line">$ git checkout develop</span><br><span class="line">// 合并分支</span><br><span class="line">$ git merge --no-ff runningcat/release-0.1.0</span><br><span class="line">// 同步分支</span><br><span class="line">$ git push</span><br><span class="line">// 删除本地 runningcat/release-0.1.0 分支</span><br><span class="line">$ git branch <span class="_">-d</span> runningcat/release-0.1.0</span><br><span class="line">// 删除线上 runningcat/release-0.1.0 分支（如果线上有的话）</span><br><span class="line">$ git push runningcat --delete runningcat/release-0.1.0</span><br><span class="line">// 标签</span><br><span class="line">$ git tag <span class="_">-a</span> v0.1.0 master</span><br><span class="line">// 同步标签</span><br><span class="line">$ git push --tags</span><br></pre></td></tr></table></figure>
<h3 id="开始Hotfix"><a href="#开始Hotfix" class="headerlink" title="开始Hotfix"></a>开始Hotfix</h3><p>当我们在Production发现新的Bug时候，我们需要创建一个Hotfix, 完成Hotfix后，我们合并回Master和Develop分支，所以Hotfix的改动会进入下一个Release<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 创建hotfix分支</span><br><span class="line">$ git checkout -b runningcat/hotfix-0.1.1 master</span><br></pre></td></tr></table></figure></p>
<h3 id="完成Hotfix"><a href="#完成Hotfix" class="headerlink" title="完成Hotfix"></a>完成Hotfix</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 切换到master（production）分支</span><br><span class="line">$ git checkout master</span><br><span class="line">// 合并分支</span><br><span class="line">$ git merge --no-ff runningcat/hotfix-0.1.1</span><br><span class="line">// 同步分支</span><br><span class="line">$ git push</span><br><span class="line"></span><br><span class="line">// 切换到develop分支</span><br><span class="line">$ git checkout develop</span><br><span class="line">// 合并分支</span><br><span class="line">$ git merge --no-ff runningcat/hotfix-0.1.1</span><br><span class="line">// 同步分支</span><br><span class="line">$ git push</span><br><span class="line">// 删除本地 hotfix（runningcat/hotfix-0.1.1）分支</span><br><span class="line">git branch <span class="_">-d</span> hotfix-0.1.1</span><br><span class="line"></span><br><span class="line">// 打标签</span><br><span class="line">git tag <span class="_">-a</span> v0.1.1 master</span><br><span class="line">// 同步标签</span><br><span class="line">git push --tags</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="photo-新建shell脚本" class="article article-type-photo" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/24/新建shell脚本/" class="article-date">
  	<time datetime="2016-06-23T16:00:00.000Z" itemprop="datePublished">2016-06-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/24/新建shell脚本/">mac新建shell脚本</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="mac新建shell脚本"><a href="#mac新建shell脚本" class="headerlink" title="mac新建shell脚本"></a>mac新建shell脚本</h1><h3 id="1、文件以-sh为后缀"><a href="#1、文件以-sh为后缀" class="headerlink" title="1、文件以.sh为后缀"></a>1、文件以.sh为后缀</h3><h3 id="2、文件以-bin-sh-开头"><a href="#2、文件以-bin-sh-开头" class="headerlink" title="2、文件以 #! /bin/sh 开头"></a>2、文件以 #! /bin/sh 开头</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#! /bin/sh</span><br><span class="line">group_1=&quot;115.159.62.18&quot;</span><br><span class="line"></span><br><span class="line">sysname=&quot;authorization-module&quot;</span><br><span class="line"></span><br><span class="line">###################### restart $&#123;sysname&#125;/ ######################</span><br><span class="line"></span><br><span class="line">rsync -avzuP --exclude-from=&quot;/Users/chenyuwu/Desktop/shell/project-outsourcing/$&#123;sysname&#125;/exclude.txt&quot; /Users/chenyuwu/Desktop/workSpace/project-outsourcing/$&#123;sysname&#125;  -e &quot;ssh -p 22&quot; root@$&#123;group_1&#125;:/data/local/tools/</span><br><span class="line"></span><br><span class="line">ssh  -p 22 root@$&#123;group_1&#125; &lt;&lt;eeooff</span><br><span class="line"></span><br><span class="line">cd /data/local/tools/$&#123;sysname&#125;</span><br><span class="line"></span><br><span class="line">forever stop ./bin/www</span><br><span class="line">sleep 4</span><br><span class="line">echo ========================  $&#123;sysname&#125; is stoping ===============</span><br><span class="line"></span><br><span class="line">forever start ./bin/www</span><br><span class="line"></span><br><span class="line">sleep 4</span><br><span class="line">echo ========================  $&#123;sysname&#125; is starting ===============</span><br><span class="line"></span><br><span class="line">exit</span><br><span class="line">eeooff</span><br></pre></td></tr></table></figure>
<h3 id="3、再文件目录下执行-chmod-x-文件名称-sh"><a href="#3、再文件目录下执行-chmod-x-文件名称-sh" class="headerlink" title="3、再文件目录下执行  chmod +x 文件名称.sh"></a>3、再文件目录下执行  chmod +x 文件名称.sh</h3>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="photo-shell脚本初始化安装node服务" class="article article-type-photo" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/22/shell脚本初始化安装node服务/" class="article-date">
  	<time datetime="2016-06-21T16:00:00.000Z" itemprop="datePublished">2016-06-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/22/shell脚本初始化安装node服务/">shell脚本初始化安装node服务</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#node 服务器从无到有</p>
<ol>
<li>使用root用户给自用户 赋软链接权限  chown jason.jason -R /usr/local/bin/</li>
<li>执行 init-server shell 脚本</li>
</ol>
<p>init-server shell 脚本代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">#! /bin/sh</span><br><span class="line"></span><br><span class="line">group_1=&quot;120.26.225.223&quot;</span><br><span class="line"></span><br><span class="line">node_version=&quot;node-v4.4.5-linux-x64.tar.gz&quot;</span><br><span class="line"></span><br><span class="line">node_dir=&quot;node-v4.4.5-linux-x64&quot;</span><br><span class="line"></span><br><span class="line">server_module=&quot;forever&quot;</span><br><span class="line"></span><br><span class="line">ssh  -p 50022 jason@$&#123;group_1&#125; &lt;&lt;eeooff</span><br><span class="line"></span><br><span class="line">cd /data/local/</span><br><span class="line"></span><br><span class="line">if [ ! -d &quot;tools&quot; ];then</span><br><span class="line">    mkdir tools</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">cd ./tools</span><br><span class="line"></span><br><span class="line">if [ ! -d &quot;node&quot; ];then</span><br><span class="line">    mkdir node</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">cd ./node</span><br><span class="line"></span><br><span class="line">if [ ! -f &quot;$node_version&quot; ];then</span><br><span class="line">echo ======================== $&#123;node_version&#125; is downloading ===============</span><br><span class="line"></span><br><span class="line">wget https://nodejs.org/dist/v4.4.5/$&#123;node_version&#125;</span><br><span class="line"></span><br><span class="line">echo ======================== $&#123;node_version&#125; has been downloaded ===============</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ -f &quot;$node_version&quot; ];then</span><br><span class="line">    if [ ! -d &quot;$node_dir&quot; ];then</span><br><span class="line">        tar -zxvf $&#123;node_version&#125;</span><br><span class="line">    fi</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">ln -s /data/local/tools/node/$&#123;node_dir&#125;/bin/node /usr/local/bin/node</span><br><span class="line">ln -s /data/local/tools/node/$&#123;node_dir&#125;/bin/npm /usr/local/bin/npm</span><br><span class="line"></span><br><span class="line">echo ======================== $&#123;server_module&#125; is installing ===============</span><br><span class="line"></span><br><span class="line">npm uninstall -g $&#123;server_module&#125;</span><br><span class="line"></span><br><span class="line">npm install -g $&#123;server_module&#125;</span><br><span class="line"></span><br><span class="line">echo ======================== $&#123;server_module&#125; has been installed. ===============</span><br><span class="line"></span><br><span class="line">ln -s /data/local/tools/node/$&#123;node_dir&#125;/bin/forever /usr/local/bin/forever</span><br><span class="line"></span><br><span class="line">exit</span><br><span class="line">eeooff</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="photo-SVNCommand-bug-1" class="article article-type-photo" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/21/SVNCommand-bug-1/" class="article-date">
  	<time datetime="2016-06-20T16:00:00.000Z" itemprop="datePublished">2016-06-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/21/SVNCommand-bug-1/">svn local delete, incoming delete upon update 解决办法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>svn local delete, incoming delete upon update 解决办法</p>
<h1 id="1-In-your-working-directory-recreate-that-conflicting-file"><a href="#1-In-your-working-directory-recreate-that-conflicting-file" class="headerlink" title="1.In your working directory, recreate that conflicting file:"></a>1.In your working directory, recreate that conflicting file:</h1><pre><code>$ touch foo
</code></pre><h1 id="2-Revert-that-file-to-the-state-SVN-likes-that-means-deleted"><a href="#2-Revert-that-file-to-the-state-SVN-likes-that-means-deleted" class="headerlink" title="2.Revert that file to the state SVN likes (that means deleted):"></a>2.Revert that file to the state SVN likes (that means deleted):</h1><pre><code>$ svn revert foo
</code></pre><h1 id="3-Now-delete-that-file"><a href="#3-Now-delete-that-file" class="headerlink" title="3.Now delete that file:"></a>3.Now delete that file:</h1><p>$ rm foo</p>
<h1 id="4-Conflict-resolved"><a href="#4-Conflict-resolved" class="headerlink" title="4.Conflict resolved:"></a>4.Conflict resolved:</h1><pre><code>$ svn st
</code></pre><h1 id="Done"><a href="#Done" class="headerlink" title="Done."></a>Done.</h1><p>最后还需要指定更新文件：svn up application.js</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SVN/">SVN</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="photo-防止表单自动填充用户名、密码信息" class="article article-type-photo" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/14/防止表单自动填充用户名、密码信息/" class="article-date">
  	<time datetime="2016-06-13T16:00:00.000Z" itemprop="datePublished">2016-06-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/14/防止表单自动填充用户名、密码信息/">防止表单自动填充用户名、密码信息</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>防止表单自动填充用户名、密码信息</p>
<pre><code>&lt;form&gt;
    &lt;input name=&quot;a&quot; autocomplete=&quot;off&quot;&gt;
    &lt;input style=&quot;display:none&quot;&gt;
    &lt;input type=&quot;password&quot; name=&quot;b&quot;&gt;&lt;button&gt;Sign in&lt;/button&gt;
&lt;/form&gt;
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML/">HTML</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="photo-linux-chown" class="article article-type-photo" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/21/linux-chown/" class="article-date">
  	<time datetime="2016-04-20T16:00:00.000Z" itemprop="datePublished">2016-04-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/21/linux-chown/">LINUX 命令</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="chown命令"><a href="#chown命令" class="headerlink" title="chown命令"></a>chown命令</h3><p>chown将指定文件的拥有者改为指定的用户或组，用户可以是用户名或者用户ID；组可以是组名或者组ID；文件是以空格分开的要改变权限的文件列表，支持通配符。系统管理员经常使用chown命令，在将文件拷贝到另一个用户的名录下之后，让用户拥有使用该文件的权限。 </p>
<ol>
<li><p>命令格式</p>
<p> chown [选项]… [所有者][:[组]] 文件…</p>
</li>
<li><p>命令功能：</p>
<p> 通过chown改变文件的拥有者和群组。在更改文件的所有者或所属群组时，可以使用用户名称和用户识别码设置。普通用户不能将自己的文件改变成其他的拥有者。其操作权限一般为管理员。</p>
</li>
<li><p>命令参数：</p>
<p> 必要参数:</p>
<p> -C 显示更改的部分的信息</p>
<p> -F 忽略错误信息</p>
<p> -H 修复符号链接</p>
<p> -R 处理指定目录以及其子目录下的所有文件</p>
<p> -V 显示详细的处理信息</p>
<p> -DEFERENCE 作用于符号链接的指向，而不是链接文件本身</p>
<p> 选择参数:</p>
<p> –reference=&lt;目录或文件&gt; 把指定的目录/文件作为参考，把操作的文件/目录设置成参考文件/目录相同拥有者和群组</p>
<p> –from=&lt;当前用户：当前群组&gt; 只有当前用户和群组跟指定的用户和群组相同时才进行改变</p>
<p> –help 显示帮助信息</p>
<p> –version 显示版本信息</p>
</li>
</ol>
<p>4．使用实例：</p>
<p>实例1：改变拥有者和群组</p>
<p>命令：</p>
<pre><code>chown mail:mail log2012.log
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test6]# ll</span><br><span class="line">---xr--r-- 1 root users 302108 11-30 08:39 linklog.log</span><br><span class="line">---xr--r-- 1 root users 302108 11-30 08:39 log2012.log</span><br><span class="line">-rw-r--r-- 1 root users     61 11-30 08:39 log2013.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2014.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2015.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2016.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2017.log</span><br><span class="line">[root@localhost test6]# chown mail:mail log2012.log </span><br><span class="line">[root@localhost test6]# ll</span><br><span class="line">---xr--r-- 1 root users 302108 11-30 08:39 linklog.log</span><br><span class="line">---xr--r-- 1 mail mail  302108 11-30 08:39 log2012.log</span><br><span class="line">-rw-r--r-- 1 root users     61 11-30 08:39 log2013.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2014.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2015.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2016.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2017.log</span><br><span class="line">[root@localhost test6]#</span><br></pre></td></tr></table></figure>
<p>实例2：改变文件拥有者和群组</p>
<p>命令：</p>
<pre><code>chown root: log2012.log
</code></pre><p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test6]# ll</span><br><span class="line">总计 604</span><br><span class="line">---xr--r-- 1 root users 302108 11-30 08:39 linklog.log</span><br><span class="line">---xr--r-- 1 mail mail  302108 11-30 08:39 log2012.log</span><br><span class="line">-rw-r--r-- 1 root users     61 11-30 08:39 log2013.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2014.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2015.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2016.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2017.log</span><br><span class="line">[root@localhost test6]# chown root: log2012.log </span><br><span class="line">[root@localhost test6]# ll</span><br><span class="line">总计 604</span><br><span class="line">---xr--r-- 1 root users 302108 11-30 08:39 linklog.log</span><br><span class="line">---xr--r-- 1 root root  302108 11-30 08:39 log2012.log</span><br><span class="line">-rw-r--r-- 1 root users     61 11-30 08:39 log2013.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2014.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2015.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2016.log</span><br><span class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2017.log</span><br><span class="line">[root@localhost test6]#</span><br></pre></td></tr></table></figure>
<p>实例3：改变文件群组</p>
<p>命令：</p>
<pre><code>chown -R jason.jason *
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Dean
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>